<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forest of Support - Healing Sanctuary</title>
    <!-- PWA Configuration - No Image Icons Needed -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#4a7c3f">
    <meta name="description" content="Forest of Support - A digital sanctuary with contextual poetic wisdom">
    <link rel="manifest" href="manifest.json?v=1.2">
    
    <!-- Emoji as Icons (No image files needed) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸŒ³</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸŒ³</text></svg>">
    
    <!-- iOS Support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Forest of Support">
    
    <!-- Windows Metro Tile -->
    <meta name="msapplication-TileColor" content="#4a7c3f">
    <meta name="msapplication-config" content="none">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Georgia', serif;
        }
        
        /* Georgian font fallback */
        .georgian-lang {
            font-family: 'Noto Sans Georgian', 'DejaVu Sans', 'BPG Nino', 'Georgia', serif;
        }
        
        body {
            background: linear-gradient(to bottom, #e6f2e6, #c9e4c9);
            color: #2d5016;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 2px solid #b8d8a8;
        }
        
        h1 {
            color: #2d5016;
            font-size: 2.8em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .tagline {
            font-style: italic;
            color: #5a7d3e;
            font-size: 1.2em;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: none;
        }
        
        .card.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        button {
            background: #4a7c3f;
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 8px;
            box-shadow: 0 4px 0 #3a6530;
        }
        
        button:hover {
            background: #3a6530;
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #2d5016;
        }
        
        button.secondary {
            background: #8aae7f;
        }
        
        .tree-display {
            text-align: center;
            font-family: 'Courier New', monospace;
            line-height: 1.2;
            margin: 25px 0;
            padding: 25px;
            background: #f9fff9;
            border-radius: 15px;
            border: 2px solid #b8d8a8;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .principle-badge {
            display: inline-block;
            background: #e8f5e8;
            padding: 12px 20px;
            margin: 8px;
            border-radius: 25px;
            border-left: 5px solid #4a7c3f;
            width: 100%;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .principle-badge:hover {
            background: #d4e8d4;
            transform: translateX(5px);
        }
        
        .principle-badge.selected {
            background: #c9e4c9;
            box-shadow: 0 5px 15px rgba(74, 124, 63, 0.3);
        }
        
        textarea {
            width: 100%;
            min-height: 150px;
            padding: 20px;
            border: 2px solid #c9e4c9;
            border-radius: 15px;
            font-size: 1.1em;
            margin: 15px 0;
            resize: vertical;
            font-family: 'Georgia', serif;
        }
        
        .georgian-lang textarea {
            font-family: 'Noto Sans Georgian', 'DejaVu Sans', 'BPG Nino', 'Georgia', serif;
        }
        
        .exercise-box {
            background: #f0f7f0;
            padding: 25px;
            margin: 20px 0;
            border-radius: 15px;
            border: 2px solid #b8d8a8;
        }
        
        .poem-response {
            background: linear-gradient(to right, #f9f5e6, #f5f0d9);
            padding: 30px;
            margin: 20px 0;
            border-radius: 15px;
            border-left: 8px solid #8a5a2d;
            font-style: italic;
            line-height: 1.8;
            text-align: center;
            font-size: 1.1em;
        }
        
        .sage-quote {
            text-align: right;
            margin-top: 15px;
            font-style: normal;
            font-weight: bold;
            color: #5a7d3e;
            padding-top: 15px;
            border-top: 1px dashed #b8d8a8;
        }
        
        .journal-entry {
            background: #f9fff9;
            padding: 20px;
            margin: 15px 0;
            border-radius: 15px;
            border-left: 5px solid #4a7c3f;
        }
        
        .entry-date {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }
        
        .step {
            padding: 25px;
            margin: 20px 0;
            background: #f9fff9;
            border-radius: 15px;
            border: 2px solid #d4e8d4;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .stat-box {
            background: #f0f7f0;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid #d4e8d4;
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #4a7c3f;
            display: block;
        }
        
        .tree-name-display {
            font-size: 2em;
            color: #2d5016;
            margin: 20px 0;
            font-weight: bold;
            text-align: center;
        }
        
        .progress-ring {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: conic-gradient(#4a7c3f 0% 25%, #e8f5e8 25% 100%);
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #2d5016;
            font-size: 1.2em;
        }
        
        .progress-ring-inner {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 25px;
            color: #5a7d3e;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
        }
        
        .language-footer {
            text-align: center;
            margin: 10px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 10px;
        }
        
        .language-toggle {
            background: #8aae7f;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }
        
        .language-toggle:hover {
            background: #7a9e6f;
            transform: translateY(-2px);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2.2em;
            }
            
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            button {
                padding: 12px 20px;
                font-size: 1em;
                margin: 5px;
            }
        }
    </style>
</head>
<body> 
    <div class="container">
        <header>
            <h1 id="app-title">ğŸŒ³ Forest of Support</h1>
            <p class="tagline" id="app-tagline">A digital sanctuary with contextual poetic wisdom</p>
            <p id="app-subtitle">Your journal receives personalized healing poems</p>
        </header>
        
        <!-- Navigation -->
        <div style="text-align: center; margin-bottom: 30px;">
            <button onclick="showCard('welcome')" id="nav-welcome">ğŸ  Welcome</button>
            <button onclick="showCard('plant')" id="nav-plant">ğŸª´ Plant Tree</button>
            <button onclick="showCard('practice')" id="nav-practice">ğŸ“¿ Daily Practice</button>
            <button onclick="showCard('forest')" id="nav-forest">ğŸŒ² My Forest</button>
            <button onclick="showCard('journal')" id="nav-journal">ğŸ“– Journal</button>
        </div>
        
        <!-- Welcome Card -->
        <div id="welcome" class="card active">
            <h2 id="welcome-title">Welcome to Your Digital Forest</h2>
            <p id="welcome-text">This is a safe space to practice <strong>tree-inspired healing</strong>. Your journal entries receive personalized poetic responses that reflect your words.</p>
            
            <div style="margin: 25px 0;">
                <h3 id="principles-title">ğŸŒ¿ The 8 Tree Principles</h3>
                <div id="principlesList"></div>
            </div>
            
            <p id="how-it-works"><strong>How it works:</strong> Plant your digital tree, practice daily principles, journal your reflections, and receive contextual poems that respond to your words.</p>
            
            <div style="text-align: center; margin-top: 30px;">
                <button onclick="showCard('plant')" id="start-journey-btn">Start Your Journey â†’</button>
            </div>
        </div>
        
        <!-- Plant Tree Card -->
        <div id="plant" class="card">
            <h2 id="plant-title">ğŸª´ Plant Your Digital Tree</h2>
            <p id="plant-text">Every tree starts as a seed. Name yours with intention.</p>
            
            <input type="text" id="treeName" placeholder="Enter your tree's name..." 
                   style="width: 100%; padding: 15px; margin: 20px 0; font-size: 1.2em; border: 2px solid #b8d8a8; border-radius: 10px; text-align: center;">
            
            <div class="tree-display" id="seedPreview">
                <pre style="font-size: 1.3em; line-height: 1.4;">
       ğŸŒ±
      Your seed
     is planted with
      intention
                </pre>
            </div>
            
            <div style="text-align: center;">
                <button onclick="plantTree()" id="plant-btn">ğŸŒ± Plant My Tree</button>
                <button class="secondary" onclick="loadDemoTree()" id="demo-btn">Try a Demo Tree</button>
            </div>
        </div>
        
        <!-- Daily Practice Card -->
        <div id="practice" class="card">
            <h2 id="practice-title">ğŸ“¿ Daily Tree Practice</h2>
            <div id="practiceStatus">Plant a tree first to begin practice.</div>
            
            <div id="practiceContent" style="display: none;">
                <!-- Step 1: Choose Principle -->
                <div class="step" id="step1">
                    <h3 id="step1-title">1. Choose Today's Principle</h3>
                    <p id="step1-text">Select one principle to focus on today:</p>
                    <div id="principleButtons"></div>
                    <div style="text-align: center; margin-top: 20px;">
                        <button onclick="nextStep()" id="nextBtn1" disabled>Next â†’</button>
                    </div>
                </div>
                
                <!-- Step 2: Exercise -->
                <div class="step" id="step2" style="display: none;">
                    <h3 id="step2-title">2. Principle Exercise</h3>
                    <div id="exerciseContent" class="exercise-box">
                        <!-- Exercise will load here -->
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <button onclick="prevStep()" id="prev-btn">â† Previous</button>
                        <button onclick="nextStep()" id="next-btn2">Complete Exercise â†’</button>
                    </div>
                </div>
                
                <!-- Step 3: Journal -->
                <div class="step" id="step3" style="display: none;">
                    <h3 id="step3-title">3. Journal Reflection</h3>
                    <p id="step3-text">Reflect on today's practice. What arose for you?</p>
                    <textarea id="practiceJournal" placeholder="Write from your heart... Your words will be met with poetic wisdom."></textarea>
                    <div style="text-align: center;">
                        <button onclick="prevStep()" id="prev-btn2">â† Previous</button>
                        <button onclick="completePractice()" id="complete-btn">Complete Practice & Receive Poem</button>
                    </div>
                </div>
            </div>
            
            <!-- Practice Result with Poem -->
            <div id="practiceResult" style="display: none;">
                <div class="poem-response">
                    <p id="poemText"></p>
                    <div class="sage-quote" id="sageQuote"></div>
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <p id="resultMessage" style="margin-bottom: 20px;"></p>
                    <button onclick="showCard('journal')" id="view-journal-btn">View in Journal â†’</button>
                </div>
            </div>
        </div>
        
        <!-- My Forest Card -->
        <div id="forest" class="card">
            <h2 id="forest-title">ğŸŒ² Your Digital Forest</h2>
            <div id="forestContent">
                <div class="tree-name-display" id="treeNameDisplay">
                    No tree planted yet
                </div>
                
                <div class="tree-display" id="mainTreeDisplay">
                    <pre id="treeAscii" style="font-size: 1.1em; line-height: 1.3;">Plant a tree to begin your journey</pre>
                </div>
                
                <div class="progress-ring">
                    <div class="progress-ring-inner">
                        <span id="progressText">0/5</span>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-box">
                        <span class="stat-value" id="statRings">0</span>
                        <span id="stat-rings-label">Growth Rings</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-value" id="statStage">1</span>
                        <span id="stat-stage-label">Tree Stage</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-value" id="statJournals">0</span>
                        <span id="stat-journals-label">Journal Entries</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-value" id="statPoems">0</span>
                        <span id="stat-poems-label">Poems Received</span>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button onclick="showCard('practice')" id="start-practice-btn">Start Daily Practice</button>
                </div>
            </div>
        </div>
        
        <!-- Journal Card -->
        <div id="journal" class="card">
            <h2 id="journal-title">ğŸ“– Your Tree Journal</h2>
            <p id="journal-subtitle">Each entry receives a contextual poem that responds to your words.</p>
            
            <div style="margin: 25px 0;">
                <h3 id="new-entry-title">New Journal Entry</h3>
                <textarea id="newJournalEntry" placeholder="Write your thoughts, feelings, reflections... A healing poem will respond to your words."></textarea>
                <div style="text-align: center;">
                    <button onclick="saveJournalEntry()" id="save-entry-btn">Save Entry & Receive Poem</button>
                    <button class="secondary" onclick="clearJournal()" id="clear-btn">Clear Field</button>
                </div>
            </div>
            
            <div id="journalEntriesContainer">
                <h3 id="journey-title">Your Journey with Poems</h3>
                <div id="journalEntries">
                    <!-- Journal entries will appear here -->
                </div>
            </div>
        </div>
        
        <!-- Language Footer -->
        <div class="language-footer">
            <p id="language-label">Language / áƒ”áƒœáƒ:</p>
            <button class="language-toggle" onclick="toggleLanguage()" id="lang-toggle">ENG/GE</button>
            <p style="margin-top: 10px; font-size: 0.9em; color: #666;" id="current-lang">Current: English</p>
        </div>
        
        <footer>
            <p id="footer-version">ğŸŒ¿ Forest of Support v1.2 â€¢ With Contextual Poetic Wisdom</p>
            <p id="footer-data">Your data stays in your browser â€¢ Share with #ForestOfSupport #HealLikeATree</p>
            <p id="footer-quote"><em>"The wound is where the light enters you." - Rumi</em></p>
        </footer>
    </div>

    <script>
        // Forest of Support - Bilingual v1.2
        // 144 poems in both English and Georgian
        
        // APP CONFIG
        const APP_VERSION = '1.2';
        const VERSION_KEY = 'forestAppVersion';
        const LANG_KEY = 'forestLanguage';
        
        // Language state
        let currentLanguage = 'en'; // 'en' or 'ge'
        
        // Tree data
        let myTree = {
            name: "",
            plantedDate: "",
            rings: 0,
            stage: 1,
            journals: [],
            practices: [],
            poemsReceived: 0,
            lastPracticePrinciple: null,
            poemUsage: {},
            shownPoemsByCategory: {
                rooting: [], bark: [], rings: [], release: [], reaching: [],
                network: [], bending: [], shape: [], seasons: [], wholeness: [],
                patience: [], presence: []
            }
        };
        
        let currentStep = 1;
        let selectedPrinciple = null;
        
        // ==================== BILINGUAL CONTENT ====================
        
        const TEXT = {
            en: {
                // Navigation
                navWelcome: "ğŸ  Welcome",
                navPlant: "ğŸª´ Plant Tree",
                navPractice: "ğŸ“¿ Daily Practice",
                navForest: "ğŸŒ² My Forest",
                navJournal: "ğŸ“– Journal",
                
                // App titles
                appTitle: "ğŸŒ³ Forest of Support",
                appTagline: "A digital sanctuary with contextual poetic wisdom",
                appSubtitle: "Your journal receives personalized healing poems",
                
                // Welcome card
                welcomeTitle: "Welcome to Your Digital Forest",
                welcomeText: "This is a safe space to practice <strong>tree-inspired healing</strong>. Your journal entries receive personalized poetic responses that reflect your words.",
                principlesTitle: "ğŸŒ¿ The 8 Tree Principles",
                howItWorks: "<strong>How it works:</strong> Plant your digital tree, practice daily principles, journal your reflections, and receive contextual poems that respond to your words.",
                startJourneyBtn: "Start Your Journey â†’",
                
                // Plant tree card
                plantTitle: "ğŸª´ Plant Your Digital Tree",
                plantText: "Every tree starts as a seed. Name yours with intention.",
                treeNamePlaceholder: "Enter your tree's name...",
                plantBtn: "ğŸŒ± Plant My Tree",
                demoBtn: "Try a Demo Tree",
                
                // Practice card
                practiceTitle: "ğŸ“¿ Daily Tree Practice",
                practiceStatus: "Plant a tree first to begin practice.",
                step1Title: "1. Choose Today's Principle",
                step1Text: "Select one principle to focus on today:",
                step2Title: "2. Principle Exercise",
                step3Title: "3. Journal Reflection",
                step3Text: "Reflect on today's practice. What arose for you?",
                practiceJournalPlaceholder: "Write from your heart... Your words will be met with poetic wisdom.",
                nextBtn: "Next â†’",
                prevBtn: "â† Previous",
                completeBtn: "Complete Practice & Receive Poem",
                viewJournalBtn: "View in Journal â†’",
                
                // Forest card
                forestTitle: "ğŸŒ² Your Digital Forest",
                noTree: "No tree planted yet",
                plantToBegin: "Plant a tree to begin your journey",
                startPracticeBtn: "Start Daily Practice",
                statRingsLabel: "Growth Rings",
                statStageLabel: "Tree Stage",
                statJournalsLabel: "Journal Entries",
                statPoemsLabel: "Poems Received",
                
                // Journal card
                journalTitle: "ğŸ“– Your Tree Journal",
                journalSubtitle: "Each entry receives a contextual poem that responds to your words.",
                newEntryTitle: "New Journal Entry",
                journalPlaceholder: "Write your thoughts, feelings, reflections... A healing poem will respond to your words.",
                saveEntryBtn: "Save Entry & Receive Poem",
                clearBtn: "Clear Field",
                journeyTitle: "Your Journey with Poems",
                noEntries: "No journal entries yet.<br>Your reflections will appear here with poetic responses.",
                
                // Footer
                languageLabel: "Language / áƒ”áƒœáƒ:",
                currentLang: "Current: English",
                footerVersion: "ğŸŒ¿ Forest of Support v1.2 â€¢ With Contextual Poetic Wisdom",
                footerData: "Your data stays in your browser â€¢ Share with #ForestOfSupport #HealLikeATree",
                footerQuote: "\"The wound is where the light enters you.\" - Rumi",
                
                // Alerts and messages
                alertNameTree: "Please name your tree first.",
                alertTreePlanted: "ğŸŒ³ {name} has been planted!",
                alertSelectPrinciple: "Please select a principle first.",
                alertWriteJournal: "Please write a journal reflection before completing.",
                alertPlantFirst: "Please plant a tree first.",
                alertWriteSomething: "Please write something first.",
                
                // Result messages
                practiceComplete: "âœ… Practice complete!<br><strong>Principle:</strong> {principle}<br><strong>New growth ring added</strong><br><small>Your tree is now at stage {stage}</small>",
                
                // Update message
                updateTitle: "ğŸ“‹ Update v{version}",
                updateNewPoem: "<strong>New Poem System:</strong>",
                updateList: "<li>Poems won't repeat until you've seen all in a category</li><li>Better matching to your journal words</li><li>Tracks which poems you've received</li><li>Prioritizes poems related to your latest practice</li>",
                updatePreserved: "Your existing journal entries and tree progress are preserved."
            },
            
            ge: {
                // Navigation
                navWelcome: "ğŸ  áƒ›áƒ˜áƒ¡áƒáƒ¡áƒáƒšáƒ›áƒ”áƒ‘áƒ”áƒšáƒ˜",
                navPlant: "ğŸª´ áƒ®áƒ˜áƒ¡ áƒ“áƒáƒ áƒ’áƒ•áƒ",
                navPractice: "ğŸ“¿ áƒ§áƒáƒ•áƒ”áƒšáƒ“áƒ¦áƒ˜áƒ£áƒ áƒ˜ áƒáƒ áƒáƒ¥áƒ¢áƒ˜áƒ™áƒ",
                navForest: "ğŸŒ² áƒ©áƒ”áƒ›áƒ˜ áƒ¢áƒ§áƒ”",
                navJournal: "ğŸ“– áƒ“áƒ¦áƒ˜áƒ£áƒ áƒ˜",
                
                // App titles
                appTitle: "ğŸŒ³ áƒ›áƒ®áƒáƒ áƒ“áƒáƒ­áƒ”áƒ áƒ˜áƒ¡ áƒ¢áƒ§áƒ”",
                appTagline: "áƒ™áƒáƒœáƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ£áƒáƒšáƒ£áƒ áƒ˜ áƒáƒáƒ”áƒ¢áƒ£áƒ áƒ˜ áƒ¡áƒ˜áƒ‘áƒ áƒ«áƒœáƒ˜áƒ¡ áƒªáƒ˜áƒ¤áƒ áƒ£áƒšáƒ˜ áƒ¡áƒáƒ™áƒ£áƒšáƒ¢áƒ",
                appSubtitle: "áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ“áƒ¦áƒ˜áƒ£áƒ áƒ˜ áƒ˜áƒ¦áƒ”áƒ‘áƒ¡ áƒáƒ”áƒ áƒ¡áƒáƒœáƒáƒšáƒ£áƒ  áƒ¡áƒáƒ›áƒ™áƒ£áƒ áƒœáƒáƒšáƒ áƒáƒáƒ”áƒ›áƒ”áƒ‘áƒ¡",
                
                // Welcome card
                welcomeTitle: "áƒ™áƒ”áƒ—áƒ˜áƒšáƒ˜ áƒ˜áƒ§áƒáƒ¡ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ›áƒáƒ‘áƒ áƒ«áƒáƒœáƒ”áƒ‘áƒ áƒªáƒ˜áƒ¤áƒ áƒ£áƒš áƒ¢áƒ§áƒ”áƒ¨áƒ˜",
                welcomeText: "áƒ”áƒ¡ áƒáƒ áƒ˜áƒ¡ áƒ£áƒ¡áƒáƒ¤áƒ áƒ—áƒ®áƒ áƒ¡áƒ˜áƒ•áƒ áƒªáƒ” <strong>áƒ®áƒ˜áƒ¡ áƒ¨áƒ—áƒáƒ’áƒáƒœáƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ›áƒ™áƒ£áƒ áƒœáƒáƒšáƒáƒ‘áƒ˜áƒ¡</strong> áƒáƒ áƒáƒ¥áƒ¢áƒ˜áƒ™áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡. áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ“áƒ¦áƒ˜áƒ£áƒ áƒ˜áƒ¡ áƒ©áƒáƒœáƒáƒ¬áƒ”áƒ áƒ”áƒ‘áƒ˜ áƒ˜áƒ¦áƒ”áƒ‘áƒ”áƒœ áƒáƒ”áƒ áƒ¡áƒáƒœáƒáƒšáƒ£áƒ  áƒáƒáƒ”áƒ¢áƒ£áƒ  áƒáƒáƒ¡áƒ£áƒ®áƒ”áƒ‘áƒ¡, áƒ áƒáƒ›áƒšáƒ”áƒ‘áƒ˜áƒª áƒáƒ¡áƒáƒ®áƒáƒ•áƒ¡ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ¡ áƒ¡áƒ˜áƒ¢áƒ§áƒ•áƒ”áƒ‘áƒ¡.",
                principlesTitle: "ğŸŒ¿ áƒ®áƒ˜áƒ¡ 8 áƒáƒ áƒ˜áƒœáƒªáƒ˜áƒáƒ˜",
                howItWorks: "<strong>áƒ áƒáƒ’áƒáƒ  áƒ›áƒ£áƒ¨áƒáƒáƒ‘áƒ¡:</strong> áƒ“áƒáƒáƒ áƒ’áƒ”áƒ— áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒªáƒ˜áƒ¤áƒ áƒ£áƒšáƒ˜ áƒ®áƒ”, áƒ˜áƒ•áƒáƒ áƒ¯áƒ˜áƒ¨áƒ”áƒ— áƒ§áƒáƒ•áƒ”áƒšáƒ“áƒ¦áƒ˜áƒ£áƒ  áƒáƒ áƒ˜áƒœáƒªáƒ˜áƒáƒ”áƒ‘áƒ¨áƒ˜, áƒ“áƒ¦áƒ˜áƒ£áƒ áƒ¨áƒ˜ áƒ©áƒáƒ˜áƒ¬áƒ”áƒ áƒ”áƒ— áƒáƒ¡áƒáƒ®áƒ•áƒ”áƒ‘áƒ˜ áƒ“áƒ áƒ›áƒ˜áƒ˜áƒ¦áƒ”áƒ— áƒ™áƒáƒœáƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ£áƒáƒšáƒ£áƒ áƒ˜ áƒáƒáƒ”áƒ›áƒ”áƒ‘áƒ˜, áƒ áƒáƒ›áƒšáƒ”áƒ‘áƒ˜áƒª áƒáƒáƒ¡áƒ£áƒ®áƒáƒ‘áƒ”áƒœ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ¡ áƒ¡áƒ˜áƒ¢áƒ§áƒ•áƒ”áƒ‘áƒ¡.",
                startJourneyBtn: "áƒ“áƒáƒ˜áƒ¬áƒ§áƒ”áƒ— áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ›áƒáƒ’áƒ–áƒáƒ£áƒ áƒáƒ‘áƒ â†’",
                
                // Plant tree card
                plantTitle: "ğŸª´ áƒ“áƒáƒáƒ áƒ’áƒ”áƒ— áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒªáƒ˜áƒ¤áƒ áƒ£áƒšáƒ˜ áƒ®áƒ”",
                plantText: "áƒ§áƒ•áƒ”áƒšáƒ áƒ®áƒ” áƒ˜áƒ¬áƒ§áƒ”áƒ‘áƒ áƒ—áƒ”áƒ¡áƒšáƒ˜áƒ“áƒáƒœ. áƒ“áƒáƒáƒ áƒ¥áƒ•áƒ˜áƒ— áƒ¡áƒáƒ®áƒ”áƒšáƒ˜ áƒ’áƒáƒœáƒ–áƒ áƒáƒ®áƒ•áƒ˜áƒ—.",
                treeNamePlaceholder: "áƒ¨áƒ”áƒ˜áƒ§áƒ•áƒáƒœáƒ”áƒ— áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ®áƒ˜áƒ¡ áƒ¡áƒáƒ®áƒ”áƒšáƒ˜...",
                plantBtn: "ğŸŒ± áƒ“áƒáƒ•áƒ áƒ’áƒ áƒ©áƒ”áƒ›áƒ˜ áƒ®áƒ”",
                demoBtn: "áƒ¡áƒªáƒáƒ“áƒ”áƒ— áƒ“áƒ”áƒ›áƒ áƒ®áƒ”",
                
                // Practice card
                practiceTitle: "ğŸ“¿ áƒ§áƒáƒ•áƒ”áƒšáƒ“áƒ¦áƒ˜áƒ£áƒ áƒ˜ áƒ®áƒ˜áƒ¡ áƒáƒ áƒáƒ¥áƒ¢áƒ˜áƒ™áƒ",
                practiceStatus: "áƒáƒ áƒáƒ¥áƒ¢áƒ˜áƒ™áƒ˜áƒ¡ áƒ“áƒáƒ¡áƒáƒ¬áƒ§áƒ”áƒ‘áƒáƒ“ áƒ¯áƒ”áƒ  áƒ“áƒáƒáƒ áƒ’áƒ”áƒ— áƒ®áƒ”.",
                step1Title: "1. áƒáƒ˜áƒ áƒ©áƒ˜áƒ”áƒ— áƒ“áƒ¦áƒ”áƒ•áƒáƒœáƒ“áƒ”áƒšáƒ˜ áƒáƒ áƒ˜áƒœáƒªáƒ˜áƒáƒ˜",
                step1Text: "áƒáƒ˜áƒ áƒ©áƒ˜áƒ”áƒ— áƒ”áƒ áƒ—áƒ˜ áƒáƒ áƒ˜áƒœáƒªáƒ˜áƒáƒ˜, áƒ áƒáƒ›áƒ”áƒšáƒ–áƒ”áƒª áƒ“áƒ¦áƒ”áƒ¡ áƒ§áƒ£áƒ áƒáƒ“áƒ¦áƒ”áƒ‘áƒ áƒ’áƒáƒáƒ›áƒáƒ®áƒ•áƒ˜áƒšáƒ”áƒ‘áƒ—:",
                step2Title: "2. áƒáƒ áƒ˜áƒœáƒªáƒ˜áƒáƒ˜áƒ¡ áƒ•áƒáƒ áƒ¯áƒ˜áƒ¨áƒ˜",
                step3Title: "3. áƒ“áƒ¦áƒ˜áƒ£áƒ áƒ˜áƒ¡ áƒáƒ¡áƒáƒ®áƒ•áƒ",
                step3Text: "áƒ“áƒáƒ¤áƒ˜áƒ¥áƒ áƒ“áƒ˜áƒ— áƒ“áƒ¦áƒ”áƒ•áƒáƒœáƒ“áƒ”áƒš áƒáƒ áƒáƒ¥áƒ¢áƒ˜áƒ™áƒáƒ–áƒ”. áƒ áƒ áƒáƒ¦áƒ›áƒáƒ’áƒ˜áƒ©áƒœáƒ“áƒáƒ—?",
                practiceJournalPlaceholder: "áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— áƒ’áƒ£áƒšáƒ˜áƒ“áƒáƒœ... áƒ—áƒ¥áƒ•áƒ”áƒœáƒ¡ áƒ¡áƒ˜áƒ¢áƒ§áƒ•áƒ”áƒ‘áƒ¡ áƒáƒáƒ”áƒ¢áƒ£áƒ áƒ˜ áƒ¡áƒ˜áƒ‘áƒ áƒ«áƒœáƒ” áƒ¨áƒ”áƒ®áƒ•áƒ“áƒ”áƒ‘áƒ.",
                nextBtn: "áƒ¨áƒ”áƒ›áƒ“áƒ”áƒ’áƒ˜ â†’",
                prevBtn: "â† áƒ¬áƒ˜áƒœáƒ",
                completeBtn: "áƒ“áƒáƒáƒ¡áƒ áƒ£áƒšáƒ”áƒ— áƒáƒ áƒáƒ¥áƒ¢áƒ˜áƒ™áƒ áƒ“áƒ áƒ›áƒ˜áƒ˜áƒ¦áƒ”áƒ— áƒáƒáƒ”áƒ›áƒ",
                viewJournalBtn: "áƒ˜áƒ®áƒ˜áƒšáƒ”áƒ— áƒ“áƒ¦áƒ˜áƒ£áƒ áƒ¨áƒ˜ â†’",
                
                // Forest card
                forestTitle: "ğŸŒ² áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒªáƒ˜áƒ¤áƒ áƒ£áƒšáƒ˜ áƒ¢áƒ§áƒ”",
                noTree: "áƒ¯áƒ”áƒ  áƒáƒ áƒªáƒ”áƒ áƒ—áƒ˜ áƒ®áƒ” áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ áƒ’áƒ£áƒšáƒ˜",
                plantToBegin: "áƒ“áƒáƒáƒ áƒ’áƒ”áƒ— áƒ®áƒ” áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ›áƒáƒ’áƒ–áƒáƒ£áƒ áƒáƒ‘áƒ˜áƒ¡ áƒ“áƒáƒ¡áƒáƒ¬áƒ§áƒ”áƒ‘áƒáƒ“",
                startPracticeBtn: "áƒ“áƒáƒ˜áƒ¬áƒ§áƒ”áƒ— áƒ§áƒáƒ•áƒ”áƒšáƒ“áƒ¦áƒ˜áƒ£áƒ áƒ˜ áƒáƒ áƒáƒ¥áƒ¢áƒ˜áƒ™áƒ",
                statRingsLabel: "áƒ–áƒ áƒ“áƒ˜áƒ¡ áƒ áƒ’áƒáƒšáƒ”áƒ‘áƒ˜",
                statStageLabel: "áƒ®áƒ˜áƒ¡ áƒ¡áƒ¢áƒáƒ“áƒ˜áƒ",
                statJournalsLabel: "áƒ“áƒ¦áƒ˜áƒ£áƒ áƒ˜áƒ¡ áƒ©áƒáƒœáƒáƒ¬áƒ”áƒ áƒ”áƒ‘áƒ˜",
                statPoemsLabel: "áƒ›áƒ˜áƒ¦áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒáƒáƒ”áƒ›áƒ”áƒ‘áƒ˜",
                
                // Journal card
                journalTitle: "ğŸ“– áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ®áƒ˜áƒ¡ áƒ“áƒ¦áƒ˜áƒ£áƒ áƒ˜",
                journalSubtitle: "áƒ—áƒ˜áƒ—áƒáƒ”áƒ£áƒšáƒ˜ áƒ©áƒáƒœáƒáƒ¬áƒ”áƒ áƒ˜ áƒ˜áƒ¦áƒ”áƒ‘áƒ¡ áƒ™áƒáƒœáƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ£áƒáƒšáƒ£áƒ  áƒáƒáƒ”áƒ›áƒáƒ¡, áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒª áƒáƒáƒ¡áƒ£áƒ®áƒáƒ‘áƒ¡ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ¡ áƒ¡áƒ˜áƒ¢áƒ§áƒ•áƒ”áƒ‘áƒ¡.",
                newEntryTitle: "áƒáƒ®áƒáƒšáƒ˜ áƒ“áƒ¦áƒ˜áƒ£áƒ áƒ˜áƒ¡ áƒ©áƒáƒœáƒáƒ¬áƒ”áƒ áƒ˜",
                journalPlaceholder: "áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ¤áƒ˜áƒ¥áƒ áƒ”áƒ‘áƒ˜, áƒ’áƒ áƒ«áƒœáƒáƒ‘áƒ”áƒ‘áƒ˜, áƒáƒ¡áƒáƒ®áƒ•áƒ”áƒ‘áƒ˜... áƒ¡áƒáƒ›áƒ™áƒ£áƒ áƒœáƒáƒšáƒ áƒáƒáƒ”áƒ›áƒ áƒáƒáƒ¡áƒ£áƒ®áƒáƒ‘áƒ¡ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ¡ áƒ¡áƒ˜áƒ¢áƒ§áƒ•áƒ”áƒ‘áƒ¡.",
                saveEntryBtn: "áƒ¨áƒ”áƒ˜áƒœáƒáƒ®áƒ”áƒ— áƒ©áƒáƒœáƒáƒ¬áƒ”áƒ áƒ˜ áƒ“áƒ áƒ›áƒ˜áƒ˜áƒ¦áƒ”áƒ— áƒáƒáƒ”áƒ›áƒ",
                clearBtn: "áƒ’áƒáƒáƒ¡áƒ£áƒ¤áƒ—áƒáƒ•áƒ”áƒ— áƒ•áƒ”áƒšáƒ˜",
                journeyTitle: "áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ›áƒáƒ’áƒ–áƒáƒ£áƒ áƒáƒ‘áƒ áƒáƒáƒ”áƒ›áƒ”áƒ‘áƒ—áƒáƒœ",
                noEntries: "áƒ¯áƒ”áƒ  áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ“áƒ¦áƒ˜áƒ£áƒ áƒ˜áƒ¡ áƒ©áƒáƒœáƒáƒ¬áƒ”áƒ áƒ”áƒ‘áƒ˜.<br>áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒáƒ¡áƒáƒ®áƒ•áƒ”áƒ‘áƒ˜ áƒ’áƒáƒ›áƒáƒ©áƒœáƒ“áƒ”áƒ‘áƒ áƒáƒ¥ áƒáƒáƒ”áƒ¢áƒ£áƒ áƒ˜ áƒáƒáƒ¡áƒ£áƒ®áƒ”áƒ‘áƒ˜áƒ—.",
                
                // Footer
                languageLabel: "Language / áƒ”áƒœáƒ:",
                currentLang: "áƒ›áƒ˜áƒ›áƒ“áƒ˜áƒœáƒáƒ áƒ”: áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜",
                footerVersion: "ğŸŒ¿ áƒ›áƒ®áƒáƒ áƒ“áƒáƒ­áƒ”áƒ áƒ˜áƒ¡ áƒ¢áƒ§áƒ” v1.2 â€¢ áƒ™áƒáƒœáƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ£áƒáƒšáƒ£áƒ áƒ˜ áƒáƒáƒ”áƒ¢áƒ£áƒ áƒ˜ áƒ¡áƒ˜áƒ‘áƒ áƒ«áƒœáƒ˜áƒ—",
                footerData: "áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ›áƒáƒœáƒáƒªáƒ”áƒ›áƒ”áƒ‘áƒ˜ áƒ áƒ©áƒ”áƒ‘áƒ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ¡ áƒ‘áƒ áƒáƒ£áƒ–áƒ”áƒ áƒ¨áƒ˜ â€¢ áƒ’áƒáƒáƒ–áƒ˜áƒáƒ áƒ”áƒ— #ForestOfSupport #HealLikeATree",
                footerQuote: "\"áƒ­áƒ áƒ˜áƒšáƒáƒ‘áƒ áƒ˜áƒ¥ áƒáƒ áƒ˜áƒ¡ áƒ¡áƒáƒ“áƒáƒª áƒ¨áƒ”áƒœáƒ¨áƒ˜ áƒ¨áƒ”áƒ›áƒáƒ“áƒ˜áƒ¡ áƒ¡áƒ˜áƒœáƒáƒ—áƒšáƒ”.\" - áƒ áƒ£áƒ›áƒ˜",
                
                // Alerts and messages
                alertNameTree: "áƒ¯áƒ”áƒ  áƒ“áƒáƒáƒ áƒ¥áƒ•áƒ˜áƒ— áƒ¡áƒáƒ®áƒ”áƒšáƒ˜ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ¡ áƒ®áƒ”áƒ¡.",
                alertTreePlanted: "ğŸŒ³ {name} áƒ“áƒáƒ áƒ’áƒ£áƒšáƒ˜áƒ!",
                alertSelectPrinciple: "áƒ¯áƒ”áƒ  áƒáƒ˜áƒ áƒ©áƒ˜áƒ”áƒ— áƒáƒ áƒ˜áƒœáƒªáƒ˜áƒáƒ˜.",
                alertWriteJournal: "áƒ“áƒáƒ¡áƒáƒ¡áƒ áƒ£áƒšáƒ”áƒ‘áƒšáƒáƒ“ áƒ¯áƒ”áƒ  áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— áƒ“áƒ¦áƒ˜áƒ£áƒ áƒ˜áƒ¡ áƒáƒ¡áƒáƒ®áƒ•áƒ.",
                alertPlantFirst: "áƒ¯áƒ”áƒ  áƒ“áƒáƒáƒ áƒ’áƒ”áƒ— áƒ®áƒ”.",
                alertWriteSomething: "áƒ¯áƒ”áƒ  áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— áƒ áƒáƒ›áƒ”.",
                
                // Result messages
                practiceComplete: "âœ… áƒáƒ áƒáƒ¥áƒ¢áƒ˜áƒ™áƒ áƒ“áƒáƒ¡áƒ áƒ£áƒšáƒ“áƒ!<br><strong>áƒáƒ áƒ˜áƒœáƒªáƒ˜áƒáƒ˜:</strong> {principle}<br><strong>áƒ“áƒáƒ”áƒ›áƒáƒ¢áƒ áƒáƒ®áƒáƒšáƒ˜ áƒ–áƒ áƒ“áƒ˜áƒ¡ áƒ áƒ’áƒáƒšáƒ˜</strong><br><small>áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ®áƒ” áƒáƒ®áƒšáƒ {stage} áƒ¡áƒ¢áƒáƒ“áƒ˜áƒáƒ–áƒ”áƒ</small>",
                
                // Update message
                updateTitle: "ğŸ“‹ áƒ’áƒáƒœáƒáƒ®áƒšáƒ”áƒ‘áƒ v{version}",
                updateNewPoem: "<strong>áƒáƒ®áƒáƒšáƒ˜ áƒáƒáƒ”áƒ›áƒ˜áƒ¡ áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ:</strong>",
                updateList: "<li>áƒáƒáƒ”áƒ›áƒ”áƒ‘áƒ˜ áƒáƒ  áƒ’áƒáƒœáƒ›áƒ”áƒáƒ áƒ“áƒ”áƒ‘áƒ áƒ¡áƒáƒœáƒáƒ› áƒ§áƒ•áƒ”áƒšáƒáƒ¡ áƒ®áƒ”áƒšáƒ›áƒ˜áƒ¡áƒáƒ¬áƒ•áƒ“áƒáƒ›áƒáƒ‘áƒáƒ¡ áƒáƒ  áƒœáƒáƒ®áƒáƒ•áƒ— áƒ™áƒáƒ¢áƒ”áƒ’áƒáƒ áƒ˜áƒáƒ¨áƒ˜</li><li>áƒ£áƒ™áƒ”áƒ—áƒ”áƒ¡áƒ˜ áƒ¨áƒ”áƒ¡áƒáƒ‘áƒáƒ›áƒ˜áƒ¡áƒáƒ‘áƒ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ¡ áƒ“áƒ¦áƒ˜áƒ£áƒ áƒ˜áƒ¡ áƒ¡áƒ˜áƒ¢áƒ§áƒ•áƒ”áƒ‘áƒ—áƒáƒœ</li><li>áƒáƒ™áƒáƒœáƒ¢áƒ áƒáƒšáƒ”áƒ‘áƒ¡ áƒ áƒáƒ›áƒ”áƒšáƒ˜ áƒáƒáƒ”áƒ›áƒ”áƒ‘áƒ˜ áƒ›áƒ˜áƒ˜áƒ¦áƒ”áƒ—</li><li>áƒáƒ áƒ˜áƒáƒ áƒ˜áƒ¢áƒ”áƒ¢áƒ¡ áƒáƒœáƒ˜áƒ­áƒ”áƒ‘áƒ¡ áƒáƒáƒ”áƒ›áƒ”áƒ‘áƒ¡, áƒ áƒáƒ›áƒšáƒ”áƒ‘áƒ˜áƒª áƒ“áƒáƒ™áƒáƒ•áƒ¨áƒ˜áƒ áƒ”áƒ‘áƒ£áƒšáƒ˜áƒ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ¡ áƒ‘áƒáƒšáƒ áƒáƒ áƒáƒ¥áƒ¢áƒ˜áƒ™áƒáƒ¡áƒ—áƒáƒœ</li>",
                updatePreserved: "áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒáƒ áƒ¡áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ“áƒ¦áƒ˜áƒ£áƒ áƒ˜áƒ¡ áƒ©áƒáƒœáƒáƒ¬áƒ”áƒ áƒ”áƒ‘áƒ˜ áƒ“áƒ áƒ®áƒ˜áƒ¡ áƒáƒ áƒáƒ’áƒ áƒ”áƒ¡áƒ˜ áƒ¨áƒ”áƒœáƒáƒ áƒ©áƒ£áƒœáƒ”áƒ‘áƒ£áƒšáƒ˜áƒ."
            }
        };
        
        // ==================== BILINGUAL PRINCIPLES ====================
        
        const principlesData = {
            en: [
                {
                    id: "root",
                    title: "Root First",
                    emoji: "ğŸŒ±",
                    description: "Ground before responding",
                    exercise: `
                        <h4>ğŸŒ± Rooting Exercise (3 minutes)</h4>
                        <p>1. Stand or sit with feet flat on the ground</p>
                        <p>2. Close your eyes and place hands on your belly</p>
                        <p>3. Inhale for 4 counts: imagine roots growing deep into earth</p>
                        <p>4. Exhale for 6 counts: release tension into the ground</p>
                        <p>5. Repeat: "I am grounded. I am present."</p>
                        <p><em>Feel your connection to the earth supporting you.</em></p>
                    `
                },
                {
                    id: "bark",
                    title: "Bark Boundaries",
                    emoji: "ğŸ›¡ï¸",
                    description: "Protect while staying open",
                    exercise: `
                        <h4>ğŸ›¡ï¸ Boundary Visualization (3 minutes)</h4>
                        <p>1. Close your eyes and visualize a protective energy field</p>
                        <p>2. Imagine it as tree bark: strong but permeable</p>
                        <p>3. Set the intention: "I allow in what nourishes me"</p>
                        <p>4. "I filter out what drains me"</p>
                        <p>5. Feel this boundary as flexible yet firm</p>
                        <p><em>Healthy boundaries are loving, not walls.</em></p>
                    `
                },
                {
                    id: "rings",
                    title: "Grow Rings",
                    emoji: "ğŸ‹",
                    description: "Every experience adds strength",
                    exercise: `
                        <h4>ğŸ‹ Growth Ring Meditation (3 minutes)</h4>
                        <p>1. Place a hand on your heart</p>
                        <p>2. Recall a recent experience, challenging or joyful</p>
                        <p>3. Breathe into it: "This becomes part of my strength"</p>
                        <p>4. Visualize it forming a new ring in your core</p>
                        <p>5. Thank it for making you who you are</p>
                        <p><em>Every ring, thick or thin, contributes to your wholeness.</em></p>
                    `
                },
                {
                    id: "release",
                    title: "Seasonal Release",
                    emoji: "ğŸ‚",
                    description: "Let go of what no longer serves",
                    exercise: `
                        <h4>ğŸ‚ Letting Go Ritual (3 minutes)</h4>
                        <p>1. Bring to mind something you're ready to release</p>
                        <p>2. Write it mentally on an autumn leaf</p>
                        <p>3. Breathe deeply and visualize the leaf falling</p>
                        <p>4. Watch it drift gently to the ground</p>
                        <p>5. Say: "I release you with love. I make space for new growth."</p>
                        <p><em>Letting go is an act of trust in the cycle.</em></p>
                    `
                },
                {
                    id: "light",
                    title: "Reach for Light",
                    emoji: "â˜€ï¸",
                    description: "Grow toward nourishment",
                    exercise: `
                        <h4>â˜€ï¸ Turning Toward Light (3 minutes)</h4>
                        <p>1. Stand with arms slightly outstretched</p>
                        <p>2. Close eyes and feel for what brings you joy</p>
                        <p>3. Imagine this as sunlight filtering through leaves</p>
                        <p>4. Slowly lean toward this feeling</p>
                        <p>5. Breathe it in: "I grow toward what nourishes me"</p>
                        <p><em>Even in shadow, remember light exists above.</em></p>
                    `
                },
                {
                    id: "network",
                    title: "Forest Network",
                    emoji: "ğŸŒ³",
                    description: "We're connected underground",
                    exercise: `
                        <h4>ğŸŒ³ Mycelium Connection (3 minutes)</h4>
                        <p>1. Sit comfortably with hands on lap, palms up</p>
                        <p>2. Visualize roots connecting you to all life</p>
                        <p>3. Feel support flowing through this network</p>
                        <p>4. Send love to someone who needs it</p>
                        <p>5. Receive support from the collective</p>
                        <p><em>You are never alone in the forest.</em></p>
                    `
                },
                {
                    id: "bend",
                    title: "Bend in Storms",
                    emoji: "ğŸŒ€",
                    description: "Flexibility prevents breaking",
                    exercise: `
                        <h4>ğŸŒ€ Storm Flexibility (3 minutes)</h4>
                        <p>1. Stand with knees slightly bent, arms relaxed</p>
                        <p>2. Recall a recent challenge or "storm"</p>
                        <p>3. Instead of resisting, imagine swaying with it</p>
                        <p>4. Feel your roots holding firm while you bend</p>
                        <p>5. Breathe: "I am strong because I am flexible"</p>
                        <p><em>Sometimes bending is the strongest response.</em></p>
                    `
                },
                {
                    id: "shape",
                    title: "Your True Shape",
                    emoji: "ğŸŒ²",
                    description: "A pine doesn't try to be an oak",
                    exercise: `
                        <h4>ğŸŒ² Authentic Being (3 minutes)</h4>
                        <p>1. Place a hand on your heart</p>
                        <p>2. Ask: "When do I feel most myself?"</p>
                        <p>3. Breathe into that feeling</p>
                        <p>4. Imagine your unique growth pattern</p>
                        <p>5. Affirm: "My true shape is beautiful as it is"</p>
                        <p><em>Your authentic being is your gift to the world.</em></p>
                    `
                }
            ],
            
            ge: [
                {
                    id: "root",
                    title: "áƒ¯áƒ”áƒ  áƒ¤áƒ”áƒ¡áƒ•áƒ”áƒ‘áƒ˜",
                    emoji: "ğŸŒ±",
                    description: "áƒ“áƒáƒ›áƒáƒ’áƒ áƒ“áƒ˜ áƒ¡áƒáƒœáƒáƒ› áƒáƒáƒ¡áƒ£áƒ®áƒ¡ áƒáƒ«áƒšáƒ”áƒ•",
                    exercise: `
                        <h4>ğŸŒ± áƒ¤áƒ”áƒ¡áƒ•áƒ”áƒ‘áƒ˜áƒ¡ áƒ•áƒáƒ áƒ¯áƒ˜áƒ¨áƒ˜ (3 áƒ¬áƒ£áƒ—áƒ˜)</h4>
                        <p>1. áƒ“áƒáƒ“áƒ”áƒ¥áƒ˜áƒ— áƒáƒœ áƒ“áƒáƒ¡áƒ®áƒ”áƒ“áƒ˜áƒ— áƒ¤áƒ”áƒ®áƒ”áƒ‘áƒ˜áƒ— áƒ›áƒ˜áƒ¬áƒáƒ–áƒ”</p>
                        <p>2. áƒ“áƒáƒ®áƒ£áƒ­áƒ”áƒ— áƒ—áƒ•áƒáƒšáƒ”áƒ‘áƒ˜ áƒ“áƒ áƒ®áƒ”áƒšáƒ”áƒ‘áƒ˜ áƒ’áƒ£áƒšáƒ›áƒ™áƒ”áƒ áƒ“áƒ–áƒ” áƒ“áƒáƒ“áƒ”áƒ—</p>
                        <p>3. áƒ©áƒáƒ¡áƒ£áƒœáƒ—áƒ¥áƒ”áƒ— 4-áƒ›áƒ“áƒ”: áƒ¬áƒáƒ áƒ›áƒáƒ˜áƒ“áƒ’áƒ˜áƒœáƒ”áƒ— áƒ¤áƒ”áƒ¡áƒ•áƒ”áƒ‘áƒ˜ áƒ›áƒ˜áƒ¬áƒ˜áƒ¡ áƒ¡áƒ˜áƒ¦áƒ áƒ›áƒ”áƒ¨áƒ˜</p>
                        <p>4. áƒáƒ›áƒáƒ¡áƒ£áƒœáƒ—áƒ¥áƒ”áƒ— 6-áƒ›áƒ“áƒ”: áƒ’áƒáƒáƒœáƒ—áƒáƒ•áƒ˜áƒ¡áƒ£áƒ¤áƒšáƒ”áƒ— áƒ“áƒáƒ«áƒáƒ‘áƒ£áƒšáƒáƒ‘áƒ áƒ›áƒ˜áƒ¬áƒáƒ¨áƒ˜</p>
                        <p>5. áƒ’áƒáƒ˜áƒ›áƒ”áƒáƒ áƒ”áƒ—: "áƒ“áƒáƒ›áƒáƒ’áƒ áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ•áƒáƒ . áƒáƒ¬áƒ›áƒ§áƒáƒ¨áƒ˜ áƒ•áƒáƒ ."</p>
                        <p><em>áƒ’áƒáƒ˜áƒ’áƒ”áƒ— áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ™áƒáƒ•áƒ¨áƒ˜áƒ áƒ˜ áƒ“áƒ”áƒ“áƒáƒ›áƒ˜áƒ¬áƒáƒ¡áƒ—áƒáƒœ, áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒª áƒ’áƒ˜áƒ­áƒ”áƒ áƒ¡.</em></p>
                    `
                },
                {
                    id: "bark",
                    title: "áƒ¥áƒ”áƒ áƒ¥áƒ˜áƒ¡ áƒ¡áƒáƒ–áƒ¦áƒ•áƒ áƒ”áƒ‘áƒ˜",
                    emoji: "ğŸ›¡ï¸",
                    description: "áƒ“áƒáƒ˜áƒªáƒáƒ•áƒ˜ áƒ¦áƒ˜áƒáƒ“ áƒ“áƒáƒ áƒ©áƒ”áƒœáƒ˜áƒ—",
                    exercise: `
                        <h4>ğŸ›¡ï¸ áƒ¡áƒáƒ–áƒ¦áƒ•áƒ áƒ”áƒ‘áƒ˜áƒ¡ áƒ•áƒ˜áƒ–áƒ£áƒáƒšáƒ˜áƒ–áƒáƒªáƒ˜áƒ (3 áƒ¬áƒ£áƒ—áƒ˜)</h4>
                        <p>1. áƒ“áƒáƒ®áƒ£áƒ­áƒ”áƒ— áƒ—áƒ•áƒáƒšáƒ”áƒ‘áƒ˜ áƒ“áƒ áƒ¬áƒáƒ áƒ›áƒáƒ˜áƒ“áƒ’áƒ˜áƒœáƒ”áƒ— áƒ“áƒáƒ›áƒªáƒáƒ•áƒ˜ áƒ”áƒœáƒ”áƒ áƒ’áƒ˜áƒ˜áƒ¡ áƒ•áƒ”áƒšáƒ˜</p>
                        <p>2. áƒ¬áƒáƒ áƒ›áƒáƒ˜áƒ“áƒ’áƒ˜áƒœáƒ”áƒ— áƒ˜áƒ¡ áƒ áƒáƒ’áƒáƒ áƒª áƒ®áƒ˜áƒ¡ áƒ¥áƒ”áƒ áƒ¥áƒ˜: áƒ«áƒšáƒ˜áƒ”áƒ áƒ˜ áƒ›áƒáƒ’áƒ áƒáƒ› áƒ’áƒáƒ›áƒ¢áƒáƒ áƒ˜</p>
                        <p>3> áƒ“áƒáƒ˜áƒ¡áƒáƒ®áƒ”áƒ— áƒ’áƒáƒœáƒ–áƒ áƒáƒ®áƒ•áƒ: "áƒ¨áƒ”áƒ£áƒ¨áƒ•áƒ”áƒ‘ áƒ˜áƒ¡, áƒ áƒáƒª áƒ›áƒ˜áƒ™áƒ•áƒ”áƒ‘áƒáƒ•áƒ¡"</p>
                        <p>4> "áƒ’áƒáƒ•áƒ¤áƒ˜áƒšáƒ¢áƒ áƒáƒ• áƒ˜áƒ¡áƒ”áƒ—áƒ¡, áƒ áƒáƒª áƒ›áƒ˜áƒ›áƒ¬áƒ˜áƒ¤áƒ”áƒ‘áƒ¡"</p>
                        <p>5> áƒ˜áƒ’áƒ áƒ«áƒ”áƒœáƒ˜áƒ— áƒ”áƒ¡ áƒ¡áƒáƒ–áƒ¦áƒ•áƒáƒ áƒ˜ áƒ›áƒáƒ¥áƒœáƒ˜áƒšáƒáƒ“ áƒ›áƒáƒ’áƒ áƒáƒ› áƒ›áƒ¢áƒ™áƒ˜áƒªáƒ”áƒ“</p>
                        <p><em>áƒ¯áƒáƒœáƒ¡áƒáƒ¦áƒ˜ áƒ¡áƒáƒ–áƒ¦áƒ•áƒ áƒ”áƒ‘áƒ˜ áƒ¡áƒ˜áƒ§áƒ•áƒáƒ áƒ£áƒšáƒ˜áƒ, áƒáƒ áƒ áƒ™áƒ”áƒ“áƒšáƒ”áƒ‘áƒ˜.</em></p>
                    `
                },
                {
                    id: "rings",
                    title: "áƒ áƒ’áƒáƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒ–áƒ áƒ“áƒ",
                    emoji: "ğŸ‹",
                    description: "áƒ§áƒáƒ•áƒ”áƒšáƒ˜ áƒ’áƒáƒ›áƒáƒªáƒ“áƒ˜áƒšáƒ”áƒ‘áƒ áƒáƒ›áƒáƒ¢áƒ”áƒ‘áƒ¡ áƒ«áƒáƒšáƒáƒ¡",
                    exercise: `
                        <h4>ğŸ‹ áƒ–áƒ áƒ“áƒ˜áƒ¡ áƒ áƒ’áƒáƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒ›áƒ”áƒ“áƒ˜áƒ¢áƒáƒªáƒ˜áƒ (3 áƒ¬áƒ£áƒ—áƒ˜)</h4>
                        <p>1. áƒ›áƒáƒáƒ—áƒáƒ•áƒ¡áƒ”áƒ— áƒ®áƒ”áƒšáƒ˜ áƒ’áƒ£áƒšáƒ–áƒ”</p>
                        <p>2. áƒ’áƒáƒ˜áƒ®áƒ¡áƒ”áƒœáƒ”áƒ— áƒ‘áƒáƒšáƒáƒ“áƒ áƒáƒ˜áƒœáƒ“áƒ”áƒšáƒ˜ áƒ’áƒáƒ›áƒáƒªáƒ“áƒ˜áƒšáƒ”áƒ‘áƒ, áƒ áƒ—áƒ£áƒšáƒ˜ áƒáƒœ áƒ¡áƒ˜áƒ®áƒáƒ áƒ£áƒšáƒ˜áƒ¡ áƒ›áƒáƒ›áƒªáƒ”áƒ›áƒ˜</p>
                        <p>3. áƒ©áƒáƒ¡áƒ£áƒœáƒ—áƒ¥áƒ”áƒ— áƒ›áƒáƒ¡áƒ¨áƒ˜: "áƒ”áƒ¡ áƒ®áƒ“áƒ”áƒ‘áƒ áƒ©áƒ”áƒ›áƒ˜ áƒ«áƒáƒšáƒ˜áƒ¡ áƒœáƒáƒ¬áƒ˜áƒšáƒ˜"</p>
                        <p>4. áƒ¬áƒáƒ áƒ›áƒáƒ˜áƒ“áƒ’áƒ˜áƒœáƒ”áƒ— áƒ˜áƒ¡ áƒáƒ§áƒáƒšáƒ˜áƒ‘áƒ”áƒ‘áƒ¡ áƒáƒ®áƒáƒš áƒ áƒ’áƒáƒšáƒ¡ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ¡ áƒ‘áƒ˜áƒ áƒ—áƒ•áƒ¨áƒ˜</p>
                        <p>5> áƒ›áƒáƒ“áƒšáƒáƒ‘áƒ áƒ’áƒáƒ“áƒáƒ£áƒ®áƒáƒ“áƒ”áƒ—, áƒ áƒáƒ› áƒ’áƒáƒ’áƒ®áƒáƒ“áƒáƒ— áƒ˜áƒ¡, áƒ•áƒ˜áƒœáƒª áƒ®áƒáƒ áƒ—</p>
                        <p><em>áƒ§áƒáƒ•áƒ”áƒšáƒ˜ áƒ áƒ’áƒáƒšáƒ˜, áƒ¡áƒ¥áƒ”áƒšáƒ˜ áƒ—áƒ£ áƒ—áƒ®áƒ”áƒšáƒ˜, áƒ¬áƒ•áƒšáƒ˜áƒšáƒ¡ áƒ¨áƒ”áƒáƒ¥áƒ•áƒ¡ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ¡ áƒ¡áƒ˜áƒ¡áƒ áƒ£áƒšáƒ”áƒ¨áƒ˜.</em></p>
                    `
                },
                {
                    id: "release",
                    title: "áƒ¡áƒ”áƒ–áƒáƒœáƒ£áƒ áƒ˜ áƒ’áƒáƒ—áƒáƒ•áƒ˜áƒ¡áƒ£áƒ¤áƒšáƒ”áƒ‘áƒ",
                    emoji: "ğŸ‚",
                    description: "áƒ’áƒáƒáƒ—áƒáƒ•áƒ˜áƒ¡áƒ£áƒ¤áƒšáƒ” áƒ áƒáƒª áƒáƒ¦áƒáƒ  áƒ’áƒ”áƒ›áƒ¡áƒáƒ®áƒ£áƒ áƒ”áƒ‘áƒ",
                    exercise: `
                        <h4>ğŸ‚ áƒ’áƒáƒ—áƒáƒ•áƒ˜áƒ¡áƒ£áƒ¤áƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒ áƒ˜áƒ¢áƒ£áƒáƒšáƒ˜ (3 áƒ¬áƒ£áƒ—áƒ˜)</h4>
                        <p>1. áƒ›áƒáƒ˜áƒ¢áƒáƒœáƒ”áƒ— áƒ’áƒáƒœáƒ”áƒ‘áƒáƒ¨áƒ˜ áƒ áƒáƒ›áƒ”, áƒ áƒ˜áƒ¡áƒ˜ áƒ’áƒáƒ—áƒáƒ•áƒ˜áƒ¡áƒ£áƒ¤áƒšáƒ”áƒ‘áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡ áƒ›áƒ–áƒáƒ“ áƒ®áƒáƒ áƒ—</p>
                        <p>2. áƒ©áƒáƒ¬áƒ”áƒ áƒ”áƒ— áƒ˜áƒ¡ áƒ’áƒáƒœáƒ”áƒ‘áƒ áƒ˜áƒ•áƒáƒ“ áƒ¨áƒ”áƒ›áƒáƒ“áƒ’áƒáƒ›áƒ˜áƒ¡ áƒ¤áƒáƒ—áƒáƒšáƒ–áƒ”</p>
                        <p>3. áƒ¦áƒ áƒ›áƒáƒ“ áƒ©áƒáƒ¡áƒ£áƒœáƒ—áƒ¥áƒ”áƒ— áƒ“áƒ áƒ¬áƒáƒ áƒ›áƒáƒ˜áƒ“áƒ’áƒ˜áƒœáƒ”áƒ— áƒ¤áƒáƒ—áƒáƒšáƒ˜ áƒ”áƒªáƒ”áƒ›áƒ</p>
                        <p>4. áƒ£áƒ§áƒ£áƒ áƒ”áƒ— áƒ›áƒáƒ¡ áƒœáƒáƒ–áƒáƒ“ áƒ›áƒ˜áƒ¬áƒáƒ–áƒ” áƒ“áƒáƒªáƒ£áƒ áƒ”áƒ‘áƒáƒ¡</p>
                        <p>5. áƒ—áƒ¥áƒ•áƒ˜áƒ—: "áƒ¡áƒ˜áƒ§áƒ•áƒáƒ áƒ£áƒšáƒ˜áƒ— áƒ’áƒáƒ’áƒ˜ï¿½áƒ—áƒáƒ•áƒ˜áƒ¡áƒ£áƒ¤áƒšáƒ”áƒ‘. áƒáƒ®áƒáƒšáƒ˜ áƒ–áƒ áƒ“áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡ áƒáƒ“áƒ’áƒ˜áƒšáƒ¡ áƒ•áƒ¥áƒ›áƒœáƒ˜."</p>
                        <p><em>áƒ’áƒáƒ—áƒáƒ•áƒ˜áƒ¡áƒ£áƒ¤áƒšáƒ”áƒ‘áƒ áƒªáƒ˜áƒ™áƒšáƒ¨áƒ˜ áƒœáƒ“áƒáƒ‘áƒ˜áƒ¡ áƒáƒ¥áƒ¢áƒ˜áƒ.</em></p>
                    `
                },
                {
                    id: "light",
                    title: "áƒ¡áƒ˜áƒœáƒáƒ—áƒšáƒ˜áƒ¡áƒ™áƒ”áƒœ áƒ›áƒ˜áƒ¬áƒ•áƒ“áƒáƒ›áƒ",
                    emoji: "â˜€ï¸",
                    description: "áƒ˜áƒ–áƒ áƒ“áƒ” áƒ™áƒ•áƒ”áƒ‘áƒ˜áƒ¡áƒ™áƒ”áƒœ",
                    exercise: `
                        <h4>â˜€ï¸ áƒ¡áƒ˜áƒœáƒáƒ—áƒšáƒ˜áƒ¡áƒ™áƒ”áƒœ áƒ›áƒáƒ‘áƒ áƒ£áƒœáƒ”áƒ‘áƒ (3 áƒ¬áƒ£áƒ—áƒ˜)</h4>
                        <p>1. áƒ“áƒáƒ“áƒ”áƒ¥áƒ˜áƒ— áƒ®áƒ”áƒšáƒ”áƒ‘áƒ˜áƒ— áƒáƒ“áƒœáƒáƒ• áƒ’áƒáƒ¨áƒšáƒ˜áƒšáƒáƒ“</p>
                        <p>2. áƒ“áƒáƒ®áƒ£áƒ­áƒ”áƒ— áƒ—áƒ•áƒáƒšáƒ”áƒ‘áƒ˜ áƒ“áƒ áƒ˜áƒ’áƒ áƒ«áƒ”áƒœáƒ˜áƒ— áƒ áƒ áƒ›áƒáƒ’áƒªáƒ”áƒ›áƒ— áƒ¡áƒ˜áƒ®áƒáƒ áƒ£áƒšáƒ¡</p>
                        <p>3. áƒ¬áƒáƒ áƒ›áƒáƒ˜áƒ“áƒ’áƒ˜áƒœáƒ”áƒ— áƒ”áƒ¡ áƒ áƒáƒ’áƒáƒ áƒª áƒ›áƒ–áƒ˜áƒ¡ áƒ¨áƒ£áƒ¥áƒ˜, áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒª áƒ¤áƒáƒ—áƒšáƒ”áƒ‘áƒ¨áƒ˜ áƒ’áƒáƒ˜áƒ¤áƒ˜áƒšáƒ¢áƒ áƒ”áƒ‘áƒ</p>
                        <p>4. áƒœáƒ”áƒš-áƒœáƒ”áƒšáƒ áƒ“áƒáƒ˜áƒ®áƒáƒ áƒ”áƒ— áƒáƒ› áƒ’áƒ áƒ«áƒœáƒáƒ‘áƒ˜áƒ¡áƒ™áƒ”áƒœ</p>
                        <p>5. áƒ©áƒáƒ¡áƒ£áƒœáƒ—áƒ¥áƒ”áƒ— áƒ˜áƒ¡: "áƒ˜áƒ–áƒ áƒ“áƒ”áƒ‘áƒ˜ áƒ˜áƒ›áƒ˜áƒ¡áƒ™áƒ”áƒœ, áƒ áƒáƒª áƒ›áƒ˜áƒ™áƒ•áƒ”áƒ‘áƒáƒ•áƒ¡"</p>
                        <p><em>áƒ©áƒ áƒ“áƒ˜áƒšáƒ¨áƒ˜áƒª áƒ™áƒ˜, áƒ’áƒáƒ®áƒ¡áƒáƒ•áƒ“áƒ”áƒ—, áƒ áƒáƒ› áƒ¡áƒ˜áƒœáƒáƒ—áƒšáƒ” áƒ–áƒ”áƒ›áƒáƒ— áƒáƒ áƒ¡áƒ”áƒ‘áƒáƒ‘áƒ¡.</em></p>
                    `
                },
                {
                    id: "network",
                    title: "áƒ¢áƒ§áƒ˜áƒ¡ áƒ¥áƒ¡áƒ”áƒšáƒ˜",
                    emoji: "ğŸŒ³",
                    description: "áƒ¥áƒ•áƒ”áƒ¨ áƒ›áƒ˜áƒ¬áƒáƒ¨áƒ˜ áƒ•áƒáƒ áƒ— áƒ“áƒáƒ™áƒáƒ•áƒ¨áƒ˜áƒ áƒ”áƒ‘áƒ£áƒšáƒ”áƒ‘áƒ˜",
                    exercise: `
                        <h4>ğŸŒ³ áƒ›áƒ˜áƒªáƒ”áƒšáƒ˜áƒ£áƒ›áƒ˜áƒ¡ áƒ™áƒáƒ•áƒ¨áƒ˜áƒ áƒ˜ (3 áƒ¬áƒ£áƒ—áƒ˜)</h4>
                        <p>1. áƒ›áƒáƒ”áƒ áƒ’áƒ”áƒ— áƒ™áƒáƒ›áƒ¤áƒáƒ áƒ¢áƒ£áƒšáƒáƒ“ áƒ®áƒ”áƒšáƒ”áƒ‘áƒ˜áƒ— áƒ¬áƒ”áƒšáƒ–áƒ”, áƒ®áƒ”áƒšáƒ˜áƒ¡áƒ’áƒ£áƒšáƒ”áƒ‘áƒ˜áƒ— áƒ–áƒ”áƒ›áƒáƒ—</p>
                        <p>2. áƒ¬áƒáƒ áƒ›áƒáƒ˜áƒ“áƒ’áƒ˜áƒœáƒ”áƒ— áƒ¤áƒ”áƒ¡áƒ•áƒ”áƒ‘áƒ˜, áƒ áƒáƒ›áƒšáƒ”áƒ‘áƒ˜áƒª áƒ—áƒ¥áƒ•áƒ”áƒœ áƒ§áƒ•áƒ”áƒšáƒ áƒ¡áƒ˜áƒªáƒáƒªáƒ®áƒšáƒ”áƒ¡ áƒáƒ™áƒáƒ•áƒ¨áƒ˜áƒ áƒ”áƒ‘áƒ—</p>
                        <p>3. áƒ˜áƒ’áƒ áƒ«áƒ”áƒœáƒ˜áƒ— áƒ›áƒ®áƒáƒ áƒ“áƒáƒ­áƒ”áƒ áƒ áƒáƒ› áƒ¥áƒ¡áƒ”áƒšáƒ¨áƒ˜ áƒ›áƒáƒ«áƒ áƒáƒáƒ‘áƒ¡</p>
                        <p>4. áƒ’áƒáƒ£áƒ’áƒ–áƒáƒ•áƒœáƒ”áƒ— áƒ¡áƒ˜áƒ§áƒ•áƒáƒ áƒ£áƒšáƒ˜ áƒ•áƒ˜áƒœáƒ›áƒ”áƒ¡, áƒ•áƒ˜áƒ¡áƒáƒª áƒ¡áƒ­áƒ˜áƒ áƒ“áƒ”áƒ‘áƒ</p>
                        <p>5. áƒ›áƒ˜áƒ˜áƒ¦áƒ”áƒ— áƒ›áƒ®áƒáƒ áƒ“áƒáƒ­áƒ”áƒ áƒ áƒ™áƒáƒšáƒ”áƒ¥áƒ¢áƒ˜áƒ•áƒ˜áƒ“áƒáƒœ</p>
                        <p><em>áƒ¢áƒ§áƒ”áƒ¨áƒ˜ áƒáƒ áƒáƒ¡áƒáƒ“áƒ”áƒ¡ áƒ®áƒáƒ  áƒ›áƒáƒ áƒ¢áƒ.</em></p>
                    `
                },
                {
                    id: "bend",
                    title: "áƒ“áƒáƒ®áƒáƒ áƒ” áƒ¥áƒáƒ áƒ˜áƒ¨áƒ®áƒáƒšáƒ¨áƒ˜",
                    emoji: "ğŸŒ€",
                    description: "áƒ›áƒáƒ¥áƒœáƒ˜áƒšáƒáƒ‘áƒ áƒáƒ¤áƒ”áƒ áƒ®áƒ”áƒ‘áƒ¡ áƒ’áƒáƒ¢áƒ”áƒ®áƒ•áƒáƒ¡",
                    exercise: `
                        <h4>ğŸŒ€ áƒ¥áƒáƒ áƒ˜áƒ¨áƒ®áƒšáƒ˜áƒ¡ áƒ›áƒáƒ¥áƒœáƒ˜áƒšáƒáƒ‘áƒ (3 áƒ¬áƒ£áƒ—áƒ˜)</h4>
                        <p>1. áƒ“áƒáƒ“áƒ”áƒ¥áƒ˜áƒ— áƒ›áƒ£áƒ®áƒšáƒ”áƒ‘áƒ˜áƒ— áƒáƒ“áƒœáƒáƒ• áƒ›áƒáƒ®áƒ áƒ˜áƒšáƒ˜, áƒ®áƒ”áƒšáƒ”áƒ‘áƒ˜ áƒ›áƒáƒ“áƒ£áƒœáƒ”áƒ‘áƒ£áƒšáƒ˜</p>
                        <p>2. áƒ’áƒáƒ˜áƒ®áƒ¡áƒ”áƒœáƒ”áƒ— áƒ‘áƒáƒšáƒáƒ“áƒ áƒáƒ˜áƒœáƒ“áƒ”áƒšáƒ˜ áƒ’áƒáƒ›áƒáƒ¬áƒ•áƒ”áƒ•áƒ áƒáƒœ "áƒ¥áƒáƒ áƒ˜áƒ¨áƒ®áƒáƒšáƒ˜"</p>
                        <p>3. áƒ¬áƒ˜áƒœáƒáƒáƒ¦áƒ›áƒ“áƒ”áƒ’áƒáƒ‘áƒ˜áƒ¡ áƒœáƒáƒªáƒ•áƒšáƒáƒ“, áƒ¬áƒáƒ áƒ›áƒáƒ˜áƒ“áƒ’áƒ˜áƒœáƒ”áƒ— áƒ›áƒáƒ¡áƒ—áƒáƒœ áƒ”áƒ áƒ—áƒáƒ“ áƒ˜áƒ¥áƒœáƒ”áƒ•áƒ˜áƒœáƒ”áƒ‘áƒ—</p>
                        <p>4. áƒ˜áƒ’áƒ áƒ«áƒ”áƒœáƒ˜áƒ— áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ¤áƒ”áƒ¡áƒ•áƒ”áƒ‘áƒ˜ áƒ›áƒ¢áƒ™áƒ˜áƒªáƒ”áƒ“ áƒ£áƒ­áƒ˜áƒ áƒáƒ•áƒ¡, áƒ¡áƒáƒœáƒáƒ› áƒ˜áƒ®áƒ áƒ”áƒ‘áƒ˜áƒ—</p>
                        <p>5. áƒ©áƒáƒ¡áƒ£áƒœáƒ—áƒ¥áƒ”áƒ—: "áƒ«áƒšáƒ˜áƒ”áƒ áƒ˜ áƒ•áƒáƒ , áƒ áƒáƒ“áƒ’áƒáƒœ áƒ›áƒáƒ¥áƒœáƒ˜áƒšáƒ˜ áƒ•áƒáƒ "</p>
                        <p><em>áƒ–áƒáƒ’áƒ¯áƒ”áƒ  áƒ“áƒáƒ®áƒ áƒ áƒ§áƒ•áƒ”áƒšáƒáƒ–áƒ” áƒ«áƒšáƒ˜áƒ”áƒ áƒ˜ áƒáƒáƒ¡áƒ£áƒ®áƒ˜áƒ.</em></p>
                    `
                },
                {
                    id: "shape",
                    title: "áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒœáƒáƒ›áƒ“áƒ•áƒ˜áƒšáƒ˜ áƒ¤áƒáƒ áƒ›áƒ",
                    emoji: "ğŸŒ²",
                    description: "áƒœáƒáƒ«áƒ•áƒ˜ áƒáƒ  áƒªáƒ“áƒ˜áƒšáƒáƒ‘áƒ¡ áƒ˜áƒ§áƒáƒ¡ áƒ›áƒ£áƒ®áƒ",
                    exercise: `
                        <h4>ğŸŒ² áƒáƒ•áƒ—áƒ”áƒœáƒ¢áƒ£áƒ áƒ˜ áƒáƒ áƒ¡áƒ”áƒ‘áƒ (3 áƒ¬áƒ£áƒ—áƒ˜)</h4>
                        <p>1. áƒ›áƒáƒáƒ—áƒáƒ•áƒ¡áƒ”áƒ— áƒ®áƒ”áƒšáƒ˜ áƒ’áƒ£áƒšáƒ–áƒ”</p>
                        <p>2. áƒ°áƒ™áƒ˜áƒ—áƒ®áƒ”áƒ—: "áƒ áƒáƒ“áƒ˜áƒ¡ áƒ•áƒ’áƒ áƒ«áƒœáƒáƒ‘ áƒ§áƒ•áƒ”áƒšáƒáƒ–áƒ” áƒ›áƒ”áƒ¢áƒáƒ“ áƒ¡áƒáƒ™áƒ£áƒ—áƒáƒ  áƒ—áƒáƒ•áƒ¡?"</p>
                        <p>3. áƒ©áƒáƒ¡áƒ£áƒœáƒ—áƒ¥áƒ”áƒ— áƒáƒ› áƒ’áƒ áƒ«áƒœáƒáƒ‘áƒáƒ¨áƒ˜</p>
                        <p>4. áƒ¬áƒáƒ áƒ›áƒáƒ˜áƒ“áƒ’áƒ˜áƒœáƒ”áƒ— áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ£áƒœáƒ˜áƒ™áƒáƒšáƒ£áƒ áƒ˜ áƒ–áƒ áƒ“áƒ˜áƒ¡ áƒœáƒ˜áƒ›áƒ£áƒ¨áƒ˜</p>
                        <p>5. áƒ“áƒáƒáƒ“áƒáƒ¡áƒ¢áƒ£áƒ áƒ”áƒ—: "áƒ©áƒ”áƒ›áƒ˜ áƒœáƒáƒ›áƒ“áƒ•áƒ˜áƒšáƒ˜ áƒ¤áƒáƒ áƒ›áƒ áƒ›áƒ¨áƒ•áƒ”áƒœáƒ˜áƒ”áƒ áƒ˜áƒ áƒ˜áƒ¡áƒ”áƒ—áƒ˜ áƒ áƒáƒ’áƒáƒ áƒª áƒáƒ áƒ˜áƒ¡"</p>
                        <p><em>áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒáƒ•áƒ—áƒ”áƒœáƒ¢áƒ£áƒ áƒ˜ áƒáƒ áƒ¡áƒ”áƒ‘áƒ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ¡áƒáƒ©áƒ£áƒ¥áƒáƒ áƒ˜áƒ áƒ¡áƒáƒ›áƒ§áƒáƒ áƒáƒ¡áƒ—áƒ•áƒ˜áƒ¡.</em></p>
                    `
                }
            ]
        };
        
        // ==================== BILINGUAL POEMS ====================
        // Note: Due to character limits, I'll show structure and first few poems
        // Full 144 poems in both languages would be implemented similarly
        
        const poeticWisdom = {
            en: {
                rooting: [
                    { id: "rooting_0", poem: "The earth holds you steady\nThrough every trembling leaf\nYour roots drink deep from silence\nFinding strength beyond grief.", sage: "Be like a tree. Let the dead leaves drop. - Rumi" },
                    { id: "rooting_1", poem: "When ground feels far beneath your feet\nAnd certainty has slipped away\nRemember roots in darkness meet\nThe nourishment of silent clay.", sage: "The ground's generosity takes in our compost and grows beauty. - Rumi" }
                    // ... 10 more poems per category
                ],
                bark: [
                    { id: "bark_0", poem: "The bark is not a wall of stone\nBut breathing skin that knows its place\nIt filters what should not be known\nWith gentle, necessary grace.", sage: "Healthy boundaries are the distance at which I can love you and me simultaneously. - Prentis Hemphill" }
                    // ... 11 more poems
                ]
                // ... 10 more categories
            },
            
            ge: {
                rooting: [
                    { id: "rooting_0", poem: "áƒ“áƒ”áƒ“áƒáƒ›áƒ˜áƒ¬áƒ áƒ’áƒ˜áƒ›áƒáƒ’áƒ áƒ”áƒ‘áƒ¡\náƒ§áƒáƒ•áƒ”áƒš áƒ¥áƒáƒ áƒ¡áƒ áƒ“áƒ áƒ¤áƒáƒ—áƒáƒšáƒ¥áƒ•áƒ”áƒ¨\náƒ¤áƒ”áƒ¡áƒ•áƒ”áƒ‘áƒ˜ áƒ¡áƒ˜áƒ©áƒ£áƒ›áƒ˜áƒ“áƒáƒœ áƒ¡áƒ•áƒáƒ›áƒ”áƒœ áƒ¦áƒ áƒ›áƒáƒ“\náƒ«áƒáƒšáƒáƒ¡ áƒáƒáƒ£áƒšáƒáƒ‘áƒ”áƒœ áƒ¡áƒ”áƒ•áƒ“áƒ˜áƒ¡ áƒ›áƒ˜áƒ¦áƒ›áƒ.", sage: "áƒ˜áƒ§áƒáƒ•áƒ˜áƒ— áƒ®áƒáƒ¡áƒáƒ•áƒ˜áƒ—. áƒ›áƒáƒ“áƒ˜áƒ— áƒ›áƒ™áƒ•áƒ“áƒáƒ áƒ˜ áƒ¤áƒáƒ—áƒšáƒ”áƒ‘áƒ˜ áƒ©áƒáƒ›áƒáƒ•áƒáƒ áƒ“áƒ”áƒ¡. - áƒ áƒ£áƒ›áƒ˜" },
                    { id: "rooting_1", poem: "áƒ áƒáƒªáƒ áƒ›áƒ˜áƒ¬áƒ áƒ¨áƒáƒ áƒ¡ áƒ’áƒ”áƒ©áƒ•áƒ”áƒœáƒ”áƒ‘áƒ áƒ¤áƒ”áƒ®áƒ”áƒ‘áƒ¥áƒ•áƒ”áƒ¨\náƒ“áƒ áƒ“áƒáƒ áƒ¬áƒ›áƒ£áƒœáƒ”áƒ‘áƒ£áƒšáƒáƒ‘áƒ áƒ’áƒáƒ’áƒ˜áƒªáƒ£áƒ áƒáƒ•áƒ¡\náƒ’áƒáƒ®áƒ¡áƒáƒ•áƒ“áƒ”áƒ¡, áƒ¤áƒ”áƒ¡áƒ•áƒ”áƒ‘áƒ˜ áƒ‘áƒœáƒ”áƒšáƒ¨áƒ˜ áƒ®áƒ•áƒ“áƒ”áƒ‘áƒ˜áƒáƒœ\náƒ¡áƒ˜áƒ©áƒ£áƒ›áƒ” áƒ—áƒ˜áƒ®áƒ˜áƒ¡ áƒ™áƒ•áƒ”áƒ‘áƒáƒ¡.", sage: "áƒ›áƒ˜áƒ¬áƒ˜áƒ¡ áƒ¡áƒ£áƒšáƒ’áƒ áƒ«áƒ”áƒšáƒáƒ‘áƒ áƒ©áƒ•áƒ”áƒœáƒ¡ áƒ™áƒáƒ›áƒáƒáƒ¡áƒ¢áƒ¡ áƒ˜áƒ¦áƒ”áƒ‘áƒ¡ áƒ“áƒ áƒ¡áƒ˜áƒšáƒáƒ›áƒáƒ–áƒ”áƒ¡ áƒáƒ–áƒ áƒ“áƒ”áƒ‘áƒ¡. - áƒ áƒ£áƒ›áƒ˜" }
                    // ... translated poems
                ],
                bark: [
                    { id: "bark_0", poem: "áƒ¥áƒ”áƒ áƒ¥áƒ˜ áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ¥áƒ•áƒ˜áƒ¡ áƒ™áƒ”áƒ“áƒ”áƒšáƒ˜\náƒáƒ áƒáƒ›áƒ”áƒ“ áƒ¡áƒ£áƒœáƒ—áƒ¥áƒ•áƒáƒ“áƒ˜ áƒ™áƒáƒœáƒ˜, áƒ áƒáƒ›áƒ”áƒšáƒ›áƒáƒª áƒ˜áƒªáƒ˜áƒ¡ áƒ—áƒáƒ•áƒ˜áƒ¡áƒ˜ áƒáƒ“áƒ’áƒ˜áƒšáƒ˜\náƒ˜áƒ¡ áƒ¤áƒ˜áƒšáƒ¢áƒ áƒáƒ•áƒ¡ áƒ˜áƒ¡áƒ”áƒ—áƒ¡, áƒ áƒáƒª áƒáƒ  áƒ£áƒœáƒ“áƒ áƒ˜áƒ§áƒáƒ¡ áƒªáƒœáƒáƒ‘áƒ˜áƒšáƒ˜\náƒœáƒáƒ–áƒ˜, áƒáƒ£áƒªáƒ˜áƒšáƒ”áƒ‘áƒ”áƒšáƒ˜ áƒ›áƒáƒ“áƒšáƒ˜áƒ—.", sage: "áƒ¯áƒáƒœáƒ¡áƒáƒ¦áƒ˜ áƒ¡áƒáƒ–áƒ¦áƒ•áƒ áƒ”áƒ‘áƒ˜ áƒáƒ áƒ˜áƒ¡ áƒ˜áƒ¡ áƒ›áƒáƒœáƒ«áƒ˜áƒšáƒ˜, áƒ áƒáƒ›áƒ”áƒšáƒ–áƒ”áƒª áƒ¨áƒ”áƒ›áƒ˜áƒ«áƒšáƒ˜áƒ áƒ¨áƒ”áƒœáƒ˜ áƒ“áƒ áƒ©áƒ”áƒ›áƒ˜ áƒ”áƒ áƒ—áƒ“áƒ áƒáƒ£áƒšáƒáƒ“ áƒ¡áƒ˜áƒ§áƒ•áƒáƒ áƒ£áƒšáƒ˜. - áƒáƒ áƒ”áƒœáƒ¢áƒ˜áƒ¡ áƒ°áƒ”áƒ›áƒ¤áƒ˜áƒšáƒ˜" }
                    // ... translated poems
                ]
                // ... translated categories
            }
        };
        
        // ==================== KEYWORDS FOR CONTEXTUAL MATCHING ====================
        
        const categoryKeywords = {
            en: {
                rooting: ['ground', 'stable', 'foundation', 'root', 'shake', 'tremble', 'unsure', 'lost', 'anchor', 'steady', 'earth', 'soil', 'foundation', 'base', 'secure'],
                bark: ['boundary', 'protect', 'shield', 'defend', 'wall', 'barrier', 'safe', 'vulnerable', 'guard', 'limit', 'protect', 'shell', 'armor', 'shield', 'protection'],
                rings: ['grow', 'learn', 'experience', 'year', 'time', 'past', 'memory', 'history', 'story', 'lesson', 'age', 'circle', 'ring', 'growth', 'mature'],
                release: ['let go', 'release', 'forgive', 'move on', 'past', 'old', 'change', 'end', 'goodbye', 'leave', 'shed', 'autumn', 'fall', 'release', 'detach'],
                reaching: ['goal', 'aspire', 'light', 'reach', 'aim', 'purpose', 'dream', 'future', 'hope', 'want', 'aspiration', 'target', 'ambition', 'goal', 'aspire'],
                network: ['connect', 'friend', 'family', 'community', 'together', 'alone', 'isolated', 'support', 'help', 'share', 'together', 'community', 'connection', 'support', 'togetherness'],
                bending: ['flexible', 'bend', 'storm', 'challenge', 'difficult', 'hard', 'resilient', 'adapt', 'change', 'yield', 'flex', 'wind', 'weather', 'adapt', 'resilient'],
                shape: ['authentic', 'true', 'self', 'identity', 'who am i', 'unique', 'different', 'real', 'genuine', 'me', 'authenticity', 'individual', 'true self', 'identity'],
                seasons: ['cycle', 'season', 'change', 'phase', 'period', 'time', 'rhythm', 'pattern', 'repeat', 'return', 'spring', 'summer', 'winter', 'autumn', 'cycle'],
                wholeness: ['heal', 'whole', 'complete', 'integrate', 'scar', 'broken', 'repair', 'mend', 'fix', 'recover', 'healing', 'integration', 'scars', 'heal', 'whole'],
                patience: ['wait', 'patience', 'slow', 'time', 'process', 'gradual', 'evolve', 'develop', 'grow', 'unfold', 'patience', 'waiting', 'gradual', 'patience', 'wait'],
                presence: ['now', 'present', 'mindful', 'aware', 'moment', 'here', 'today', 'attention', 'focus', 'current', 'now', 'present', 'mindfulness', 'aware', 'now']
            },
            
            ge: {
                rooting: ['áƒ¤áƒ”áƒ¡áƒ•áƒ˜', 'áƒ›áƒ˜áƒ¬áƒ', 'áƒ¡áƒáƒ¤áƒ£áƒ«áƒ•áƒ”áƒšáƒ˜', 'áƒ“áƒáƒ›áƒáƒ’áƒ áƒ”áƒ‘áƒ', 'áƒ¡áƒ¢áƒáƒ‘áƒ˜áƒšáƒ£áƒ áƒáƒ‘áƒ', 'áƒ“áƒáƒ«áƒ áƒ£áƒšáƒ˜', 'áƒ“áƒáƒ™áƒáƒ áƒ’áƒ£áƒšáƒ˜', 'áƒ¦áƒ£áƒœáƒ', 'áƒ¬áƒáƒœáƒáƒ¡áƒ¬áƒáƒ áƒáƒ‘áƒ', 'áƒ“áƒ”áƒ“áƒáƒ›áƒ˜áƒ¬áƒ', 'áƒœáƒ˜áƒáƒ“áƒáƒ’áƒ˜', 'áƒ¡áƒáƒ¤áƒ£áƒ«áƒ•áƒ”áƒšáƒ˜', 'áƒ‘áƒáƒ–áƒ', 'áƒ£áƒ¡áƒáƒ¤áƒ áƒ—áƒ®áƒ'],
                bark: ['áƒ¡áƒáƒ–áƒ¦áƒ•áƒáƒ áƒ˜', 'áƒ“áƒáƒªáƒ•áƒ', 'áƒ¤áƒáƒ áƒ˜', 'áƒ—áƒáƒ•áƒ“áƒáƒªáƒ•áƒ', 'áƒ™áƒ”áƒ“áƒ”áƒšáƒ˜', 'áƒ‘áƒáƒ áƒ˜áƒ”áƒ áƒ˜', 'áƒ£áƒ¡áƒáƒ¤áƒ áƒ—áƒ®áƒ', 'áƒ“áƒáƒ£áƒªáƒ•áƒ”áƒšáƒ˜', 'áƒ›áƒªáƒ•áƒ”áƒšáƒ˜', 'áƒšáƒ˜áƒ›áƒ˜áƒ¢áƒ˜', 'áƒ“áƒáƒªáƒ•áƒ', 'áƒ™áƒáƒœáƒ˜', 'áƒ¯áƒáƒ•áƒ¨áƒáƒœáƒ˜', 'áƒ¤áƒáƒ áƒ˜', 'áƒ“áƒáƒªáƒ•áƒ'],
                rings: ['áƒ–áƒ áƒ“áƒ', 'áƒ¡áƒ¬áƒáƒ•áƒšáƒ', 'áƒ’áƒáƒ›áƒáƒªáƒ“áƒ˜áƒšáƒ”áƒ‘áƒ', 'áƒ¬áƒ”áƒšáƒ˜', 'áƒ“áƒ áƒ', 'áƒ¬áƒáƒ áƒ¡áƒ£áƒšáƒ˜', 'áƒ›áƒ”áƒ®áƒ¡áƒ˜áƒ”áƒ áƒ”áƒ‘áƒ', 'áƒ˜áƒ¡áƒ¢áƒáƒ áƒ˜áƒ', 'áƒ˜áƒ¡áƒ¢áƒáƒ áƒ˜áƒ', 'áƒ’áƒáƒ™áƒ•áƒ”áƒ—áƒ˜áƒšáƒ˜', 'áƒáƒ¡áƒáƒ™áƒ˜', 'áƒ¬áƒ áƒ”', 'áƒ áƒ’áƒáƒšáƒ˜', 'áƒ–áƒ áƒ“áƒ', 'áƒ›áƒáƒ–áƒ áƒ“áƒ˜áƒšáƒ˜'],
                release: ['áƒ’áƒáƒ—áƒáƒ•áƒ˜áƒ¡áƒ£áƒ¤áƒšáƒ”áƒ‘áƒ', 'áƒ’áƒáƒ—áƒáƒ•áƒ˜áƒ¡áƒ£áƒ¤áƒšáƒ”áƒ‘áƒ', 'áƒáƒáƒ¢áƒ˜áƒ”áƒ‘áƒ', 'áƒ’áƒáƒ“áƒáƒáƒ“áƒ’áƒ˜áƒšáƒ”áƒ‘áƒ', 'áƒ¬áƒáƒ áƒ¡áƒ£áƒšáƒ˜', 'áƒ«áƒ•áƒ”áƒšáƒ˜', 'áƒªáƒ•áƒšáƒ˜áƒšáƒ”áƒ‘áƒ', 'áƒ“áƒáƒ¡áƒáƒ¡áƒ áƒ£áƒšáƒ˜', 'áƒœáƒáƒ®áƒ•áƒáƒ›áƒ“áƒ˜áƒ¡', 'áƒ“áƒáƒ¢áƒáƒ•áƒ”áƒ‘áƒ', 'áƒ©áƒáƒ›áƒáƒ’áƒ“áƒ”áƒ‘áƒ', 'áƒ¨áƒ”áƒ›áƒáƒ“áƒ’áƒáƒ›áƒ', 'áƒ¨áƒ”áƒ›áƒáƒ“áƒ’áƒáƒ›áƒ', 'áƒ’áƒáƒ—áƒáƒ•áƒ˜áƒ¡áƒ£áƒ¤áƒšáƒ”áƒ‘áƒ', 'áƒ’áƒáƒœáƒ¨áƒáƒ áƒ”áƒ‘áƒ'],
                reaching: ['áƒ›áƒ˜áƒ–áƒáƒœáƒ˜', 'áƒ¨áƒ”áƒ¥áƒ›áƒœáƒ', 'áƒ¡áƒ˜áƒœáƒáƒ—áƒšáƒ”', 'áƒ›áƒ˜áƒ¦áƒ¬áƒ”áƒ•áƒ', 'áƒ›áƒ˜áƒ–áƒáƒœáƒ˜', 'áƒ›áƒ˜áƒ–áƒáƒœáƒ˜', 'áƒáƒªáƒœáƒ”áƒ‘áƒ', 'áƒ›áƒáƒ›áƒáƒ•áƒáƒšáƒ˜', 'áƒ˜áƒ›áƒ”áƒ“áƒ˜', 'áƒ¡áƒ£áƒ áƒ•áƒ˜áƒšáƒ˜', 'áƒ¨áƒ”áƒ¥áƒ›áƒœáƒ', 'áƒ¡áƒáƒ›áƒ˜áƒ–áƒœáƒ”', 'áƒáƒ›áƒ‘áƒ˜áƒªáƒ˜áƒ', 'áƒ›áƒ˜áƒ–áƒáƒœáƒ˜', 'áƒ¨áƒ”áƒ¥áƒ›áƒœáƒ'],
                network: ['áƒ™áƒáƒ•áƒ¨áƒ˜áƒ áƒ˜', 'áƒ›áƒ”áƒ’áƒáƒ‘áƒáƒ áƒ˜', 'áƒáƒ¯áƒáƒ®áƒ˜', 'áƒ—áƒáƒœáƒáƒ›áƒ”áƒ’áƒáƒ‘áƒ áƒáƒ‘áƒ', 'áƒ”áƒ áƒ—áƒáƒ“', 'áƒ›áƒáƒ áƒ¢áƒ', 'áƒ˜áƒ–áƒáƒšáƒ˜áƒ áƒ”áƒ‘áƒ£áƒšáƒ˜', 'áƒ›áƒ®áƒáƒ áƒ“áƒáƒ­áƒ”áƒ áƒ', 'áƒ“áƒáƒ®áƒ›áƒáƒ áƒ”áƒ‘áƒ', 'áƒ’áƒáƒ–áƒ˜áƒáƒ áƒ”áƒ‘áƒ', 'áƒ”áƒ áƒ—áƒáƒ“', 'áƒ—áƒáƒœáƒáƒ›áƒ”áƒ’áƒáƒ‘áƒ áƒáƒ‘áƒ', 'áƒ™áƒáƒ•áƒ¨áƒ˜áƒ áƒ˜', 'áƒ›áƒ®áƒáƒ áƒ“áƒáƒ­áƒ”áƒ áƒ', 'áƒ”áƒ áƒ—áƒáƒ“'],
                bending: ['áƒ›áƒáƒ¥áƒœáƒ˜áƒšáƒ˜', 'áƒ“áƒáƒ®áƒ áƒ', 'áƒ¥áƒáƒ áƒ˜áƒ¨áƒ®áƒáƒšáƒ˜', 'áƒ’áƒáƒ›áƒáƒ¬áƒ•áƒ”áƒ•áƒ', 'áƒ áƒ—áƒ£áƒšáƒ˜', 'áƒ áƒ—áƒ£áƒšáƒ˜', 'áƒ’áƒáƒ›áƒ«áƒšáƒ”', 'áƒáƒ“áƒáƒáƒ¢áƒáƒªáƒ˜áƒ', 'áƒªáƒ•áƒšáƒ˜áƒšáƒ”áƒ‘áƒ', 'áƒ“áƒáƒœáƒ”áƒ‘áƒ”áƒ‘áƒ', 'áƒ›áƒáƒ¥áƒœáƒ˜áƒšáƒáƒ‘áƒ', 'áƒ¥áƒáƒ áƒ˜', 'áƒáƒ›áƒ˜áƒœáƒ“áƒ˜', 'áƒáƒ“áƒáƒáƒ¢áƒáƒªáƒ˜áƒ', 'áƒ’áƒáƒ›áƒ«áƒšáƒ”'],
                shape: ['áƒáƒ•áƒ—áƒ”áƒœáƒ¢áƒ£áƒ áƒ˜', 'áƒœáƒáƒ›áƒ“áƒ•áƒ˜áƒšáƒ˜', 'áƒ—áƒáƒ•áƒ˜', 'áƒ˜áƒ“áƒ”áƒœáƒ¢áƒáƒ‘áƒ', 'áƒ•áƒ˜áƒœ áƒ•áƒáƒ ', 'áƒ£áƒœáƒ˜áƒ™áƒáƒšáƒ£áƒ áƒ˜', 'áƒ’áƒáƒœáƒ¡áƒ®áƒ•áƒáƒ•áƒ”áƒ‘áƒ£áƒšáƒ˜', 'áƒ áƒ”áƒáƒšáƒ£áƒ áƒ˜', 'áƒœáƒáƒ›áƒ“áƒ•áƒ˜áƒšáƒ˜', 'áƒ›áƒ”', 'áƒáƒ•áƒ—áƒ”áƒœáƒ¢áƒ£áƒ áƒáƒ‘áƒ', 'áƒ˜áƒœáƒ“áƒ˜áƒ•áƒ˜áƒ“áƒ£áƒáƒšáƒ£áƒ áƒ˜', 'áƒœáƒáƒ›áƒ“áƒ•áƒ˜áƒšáƒ˜ áƒ—áƒáƒ•áƒ˜', 'áƒ˜áƒ“áƒ”áƒœáƒ¢áƒáƒ‘áƒ'],
                seasons: ['áƒªáƒ˜áƒ™áƒšáƒ˜', 'áƒ¡áƒ”áƒ–áƒáƒœáƒ˜', 'áƒªáƒ•áƒšáƒ˜áƒšáƒ”áƒ‘áƒ', 'áƒ¤áƒáƒ–áƒ', 'áƒáƒ”áƒ áƒ˜áƒáƒ“áƒ˜', 'áƒ“áƒ áƒ', 'áƒ áƒ˜áƒ¢áƒ›áƒ˜', 'áƒœáƒ˜áƒ›áƒ£áƒ¨áƒ˜', 'áƒ’áƒáƒ›áƒ”áƒáƒ áƒ”áƒ‘áƒ', 'áƒ“áƒáƒ‘áƒ áƒ£áƒœáƒ”áƒ‘áƒ', 'áƒ’áƒáƒ–áƒáƒ¤áƒ®áƒ£áƒšáƒ˜', 'áƒ–áƒáƒ¤áƒ®áƒ£áƒšáƒ˜', 'áƒ–áƒáƒ›áƒ—áƒáƒ áƒ˜', 'áƒ¨áƒ”áƒ›áƒáƒ“áƒ’áƒáƒ›áƒ', 'áƒªáƒ˜áƒ™áƒšáƒ˜'],
                wholeness: ['áƒ™áƒ£áƒ áƒœáƒáƒ•áƒ¡', 'áƒ›áƒ—áƒšáƒ˜áƒáƒœáƒ˜', 'áƒ¡áƒ áƒ£áƒšáƒ˜', 'áƒ˜áƒœáƒ¢áƒ”áƒ’áƒ áƒáƒªáƒ˜áƒ', 'áƒœáƒï¿½áƒ¢áƒ áƒ˜', 'áƒ’áƒáƒ¢áƒ”áƒ®áƒ˜áƒšáƒ˜', 'áƒáƒ¦áƒ“áƒ’áƒ”áƒœáƒ', 'áƒ™áƒ£áƒ áƒœáƒáƒ•áƒ¡', 'áƒáƒ™áƒ”áƒ—áƒ”áƒ‘áƒ¡', 'áƒáƒ¦áƒ“áƒ’áƒ”áƒœáƒ', 'áƒ™áƒ£áƒ áƒœáƒáƒ•áƒ¡', 'áƒ˜áƒœáƒ¢áƒ”áƒ’áƒ áƒáƒªáƒ˜áƒ', 'áƒœáƒï¿½áƒ¢áƒ áƒ”áƒ‘áƒ˜', 'áƒ™áƒ£áƒ áƒœáƒáƒ•áƒ¡', 'áƒ›áƒ—áƒšáƒ˜áƒáƒœáƒ˜'],
                patience: ['áƒ›áƒáƒšáƒáƒ“áƒ˜áƒœáƒ˜', 'áƒ›áƒáƒ—áƒ›áƒ˜áƒœáƒ”áƒ‘áƒ', 'áƒœáƒ”áƒšáƒ˜', 'áƒ“áƒ áƒ', 'áƒáƒ áƒáƒªáƒ”áƒ¡áƒ˜', 'áƒ—áƒáƒœáƒ“áƒáƒ—áƒáƒœáƒáƒ‘áƒ˜áƒ—áƒ˜', 'áƒ’áƒáƒœáƒ•áƒ˜áƒ—áƒáƒ áƒ”áƒ‘áƒ', 'áƒ’áƒáƒœáƒ•áƒ˜áƒ—áƒáƒ áƒ”áƒ‘áƒ', 'áƒ–áƒ áƒ“áƒ', 'áƒ’áƒáƒ¨áƒšáƒ', 'áƒ›áƒáƒ—áƒ›áƒ˜áƒœáƒ”áƒ‘áƒ', 'áƒ›áƒáƒšáƒáƒ“áƒ˜áƒœáƒ˜', 'áƒ—áƒáƒœáƒ“áƒáƒ—áƒáƒœáƒáƒ‘áƒ˜áƒ—áƒ˜', 'áƒ›áƒáƒ—áƒ›áƒ˜áƒœáƒ”áƒ‘áƒ', 'áƒ›áƒáƒšáƒáƒ“áƒ˜áƒœáƒ˜'],
                presence: ['áƒáƒ®áƒšáƒ', 'áƒáƒ¬áƒ›áƒ§áƒ', 'áƒ§áƒ£áƒ áƒáƒ“áƒ¦áƒ”áƒ‘áƒ˜áƒáƒœáƒ˜', 'áƒ˜áƒªáƒ˜áƒ¡', 'áƒ›áƒáƒ›áƒ”áƒœáƒ¢áƒ˜', 'áƒáƒ¥', 'áƒ“áƒ¦áƒ”áƒ¡', 'áƒ§áƒ£áƒ áƒáƒ“áƒ¦áƒ”áƒ‘áƒ', 'áƒ¤áƒáƒ™áƒ£áƒ¡áƒ˜', 'áƒ›áƒ˜áƒ›áƒ“áƒ˜áƒœáƒáƒ áƒ”', 'áƒáƒ®áƒšáƒ', 'áƒáƒ¬áƒ›áƒ§áƒ', 'áƒ§áƒ£áƒ áƒáƒ“áƒ¦áƒ”áƒ‘áƒ˜áƒáƒœáƒáƒ‘áƒ', 'áƒ˜áƒªáƒ˜áƒ¡', 'áƒáƒ®áƒšáƒ']
            }
        };
        
        // Tree visual stages (same for both languages)
        const treeStages = [
            `       ğŸŒ±
      Your seed
     is planted with
      intention`,
            
            `       ğŸŒ¿
      /  \\
     /    \\
    /______\\
      |  |
     ~~~~~`,
            
            `       ğŸŒ³
      /ğŸƒ\\
     /    \\
    /      \\
   /________\\
      |||
    ~~~~~~~`,
            
            `       ğŸŒ³ğŸŒ³
      /    \\
     /      \\
    /        \\
   /          \\
  /____________\\
      |||||
    ~~~~~~~~~`,
            
            `     ğŸŒ³ WISDOM ğŸŒ³
    /           \\
   /   RINGS OF  \\
  /    GROWTH     \\
 /                 \\
/___________________\\
      |||||||
   ~~~~~~~~~~~~`
        ];
        
        // ==================== INITIALIZATION ====================
        
        document.addEventListener('DOMContentLoaded', function() {
            detectLanguage();
            loadTree();
            checkAppVersion();
            updateUI();
            updateDisplay();
        });
        
        // ==================== LANGUAGE FUNCTIONS ====================
        
        function detectLanguage() {
            // Check saved preference first
            const savedLang = localStorage.getItem(LANG_KEY);
            
            if (savedLang) {
                currentLanguage = savedLang;
            } else {
                // Auto-detect based on browser
                const browserLang = navigator.language || navigator.userLanguage;
                
                if (browserLang.startsWith('ka') || browserLang.startsWith('ge')) {
                    currentLanguage = 'ge';
                } else {
                    currentLanguage = 'en';
                }
                
                // Save detected language
                localStorage.setItem(LANG_KEY, currentLanguage);
            }
            
            // Update body class for Georgian font
            if (currentLanguage === 'ge') {
                document.body.classList.add('georgian-lang');
            } else {
                document.body.classList.remove('georgian-lang');
            }
        }
        
        function toggleLanguage() {
            // Switch language
            currentLanguage = currentLanguage === 'en' ? 'ge' : 'en';
            
            // Save preference
            localStorage.setItem(LANG_KEY, currentLanguage);
            
            // Update body class
            if (currentLanguage === 'ge') {
                document.body.classList.add('georgian-lang');
            } else {
                document.body.classList.remove('georgian-lang');
            }
            
            // Update UI
            updateUI();
            
            // Update principles display
            loadPrinciples();
            
            // Update practice card if needed
            if (document.getElementById('practiceContent').style.display !== 'none') {
                updatePracticeCard();
            }
        }
        
        function updateUI() {
            const t = TEXT[currentLanguage];
            
            // Update navigation
            document.getElementById('nav-welcome').textContent = t.navWelcome;
            document.getElementById('nav-plant').textContent = t.navPlant;
            document.getElementById('nav-practice').textContent = t.navPractice;
            document.getElementById('nav-forest').textContent = t.navForest;
            document.getElementById('nav-journal').textContent = t.navJournal;
            
            // Update app titles
            document.getElementById('app-title').textContent = t.appTitle;
            document.getElementById('app-tagline').textContent = t.appTagline;
            document.getElementById('app-subtitle').textContent = t.appSubtitle;
            
            // Update welcome card
            document.getElementById('welcome-title').textContent = t.welcomeTitle;
            document.getElementById('welcome-text').innerHTML = t.welcomeText;
            document.getElementById('principles-title').textContent = t.principlesTitle;
            document.getElementById('how-it-works').innerHTML = t.howItWorks;
            document.getElementById('start-journey-btn').textContent = t.startJourneyBtn;
            
            // Update plant tree card
            document.getElementById('plant-title').textContent = t.plantTitle;
            document.getElementById('plant-text').textContent = t.plantText;
            document.getElementById('treeName').placeholder = t.treeNamePlaceholder;
            document.getElementById('plant-btn').textContent = t.plantBtn;
            document.getElementById('demo-btn').textContent = t.demoBtn;
            
            // Update practice card
            document.getElementById('practice-title').textContent = t.practiceTitle;
            document.getElementById('practiceStatus').textContent = t.practiceStatus;
            document.getElementById('step1-title').textContent = t.step1Title;
            document.getElementById('step1-text').textContent = t.step1Text;
            document.getElementById('step2-title').textContent = t.step2Title;
            document.getElementById('step3-title').textContent = t.step3Title;
            document.getElementById('step3-text').textContent = t.step3Text;
            document.getElementById('practiceJournal').placeholder = t.practiceJournalPlaceholder;
            document.getElementById('nextBtn1').textContent = t.nextBtn;
            document.getElementById('prev-btn').textContent = t.prevBtn;
            document.getElementById('next-btn2').textContent = t.nextBtn;
            document.getElementById('prev-btn2').textContent = t.prevBtn;
            document.getElementById('complete-btn').textContent = t.completeBtn;
            document.getElementById('view-journal-btn').textContent = t.viewJournalBtn;
            
            // Update forest card
            document.getElementById('forest-title').textContent = t.forestTitle;
            document.getElementById('start-practice-btn').textContent = t.startPracticeBtn;
            document.getElementById('stat-rings-label').textContent = t.statRingsLabel;
            document.getElementById('stat-stage-label').textContent = t.statStageLabel;
            document.getElementById('stat-journals-label').textContent = t.statJournalsLabel;
            document.getElementById('stat-poems-label').textContent = t.statPoemsLabel;
            
            // Update journal card
            document.getElementById('journal-title').textContent = t.journalTitle;
            document.getElementById('journal-subtitle').textContent = t.journalSubtitle;
            document.getElementById('new-entry-title').textContent = t.newEntryTitle;
            document.getElementById('newJournalEntry').placeholder = t.journalPlaceholder;
            document.getElementById('save-entry-btn').textContent = t.saveEntryBtn;
            document.getElementById('clear-btn').textContent = t.clearBtn;
            document.getElementById('journey-title').textContent = t.journeyTitle;
            
            // Update footer
            document.getElementById('language-label').textContent = t.languageLabel;
            document.getElementById('current-lang').textContent = t.currentLang;
            document.getElementById('footer-version').textContent = t.footerVersion;
            document.getElementById('footer-data').textContent = t.footerData;
            document.getElementById('footer-quote').innerHTML = `<em>${t.footerQuote}</em>`;
            
            // Update tree display if no tree
            if (!myTree.name) {
                document.getElementById('treeNameDisplay').textContent = t.noTree;
                document.getElementById('treeAscii').textContent = t.plantToBegin;
            }
        }
        
        function loadPrinciples() {
            const container = document.getElementById('principlesList');
            container.innerHTML = '';
            
            const principles = principlesData[currentLanguage];
            principles.forEach(p => {
                container.innerHTML += `
                    <div class="principle-badge">
                        <strong>${p.emoji} ${p.title}</strong><br>
                        <small>${p.description}</small>
                    </div>
                `;
            });
        }
        
        // ==================== CORE APP FUNCTIONS ====================
        
        function showCard(cardId) {
            // Hide all cards
            document.querySelectorAll('.card').forEach(card => {
                card.classList.remove('active');
            });
            
            // Show selected card
            document.getElementById(cardId).classList.add('active');
            
            // Special updates
            if (cardId === 'practice') updatePracticeCard();
            if (cardId === 'forest') updateForestCard();
            if (cardId === 'journal') loadJournalEntries();
        }
        
        function plantTree() {
            const name = document.getElementById('treeName').value.trim();
            const t = TEXT[currentLanguage];
            
            if (!name) {
                alert(t.alertNameTree);
                return;
            }
            
            myTree.name = name;
            myTree.plantedDate = new Date().toLocaleDateString();
            
            // Save to browser storage
            saveTree();
            
            // Show success
            alert(t.alertTreePlanted.replace('{name}', name));
            showCard('practice');
            updatePracticeCard();
        }
        
        function loadDemoTree() {
            document.getElementById('treeName').value = currentLanguage === 'en' ? "Serenity Oak" : "áƒ›áƒ¨áƒ•áƒ˜áƒ“áƒáƒ‘áƒ˜áƒ¡ áƒ›áƒ£áƒ®áƒ";
            plantTree();
        }
        
        function loadTree() {
            const saved = localStorage.getItem('forestTree');
            if (saved) {
                myTree = JSON.parse(saved);
                
                // Ensure backward compatibility
                myTree.lastPracticePrinciple = myTree.lastPracticePrinciple || null;
                myTree.poemUsage = myTree.poemUsage || {};
                myTree.shownPoemsByCategory = myTree.shownPoemsByCategory || {
                    rooting: [], bark: [], rings: [], release: [], reaching: [],
                    network: [], bending: [], shape: [], seasons: [], wholeness: [],
                    patience: [], presence: []
                };
            }
        }
        
        function updatePracticeCard() {
            const t = TEXT[currentLanguage];
            const status = document.getElementById('practiceStatus');
            const content = document.getElementById('practiceContent');
            const result = document.getElementById('practiceResult');
            
            if (!myTree.name) {
                status.innerHTML = `ğŸŒ± <strong>${t.practiceStatus}</strong> ${t.plantBtn}`;
                content.style.display = 'none';
                result.style.display = 'none';
                return;
            }
            
            status.style.display = 'none';
            content.style.display = 'block';
            result.style.display = 'none';
            
            // Reset to step 1
            currentStep = 1;
            document.querySelectorAll('.step').forEach(step => step.style.display = 'none');
            document.getElementById('step1').style.display = 'block';
            selectedPrinciple = null;
            document.getElementById('practiceJournal').value = "";
            
            // Load principle buttons
            const container = document.getElementById('principleButtons');
            container.innerHTML = '';
            const principles = principlesData[currentLanguage];
            principles.forEach(p => {
                container.innerHTML += `
                    <div class="principle-badge" onclick="selectPrinciple('${p.id}')" id="principle-${p.id}">
                        <strong>${p.emoji} ${p.title}</strong><br>
                        <small>${p.description}</small>
                    </div>
                `;
            });
        }
        
        function selectPrinciple(id) {
            selectedPrinciple = id;
            
            // Update UI
            document.querySelectorAll('.principle-badge').forEach(badge => {
                badge.classList.remove('selected');
            });
            document.getElementById(`principle-${id}`).classList.add('selected');
            
            // Enable next button
            document.getElementById('nextBtn1').disabled = false;
        }
        
        function nextStep() {
            const t = TEXT[currentLanguage];
            
            if (currentStep === 1 && !selectedPrinciple) {
                alert(t.alertSelectPrinciple);
                return;
            }
            
            // Hide current step
            document.getElementById(`step${currentStep}`).style.display = 'none';
            
            // Show next step
            currentStep++;
            document.getElementById(`step${currentStep}`).style.display = 'block';
            
            // Load exercise if going to step 2
            if (currentStep === 2 && selectedPrinciple) {
                const principles = principlesData[currentLanguage];
                const principle = principles.find(p => p.id === selectedPrinciple);
                document.getElementById('exerciseContent').innerHTML = principle.exercise;
            }
        }
        
        function prevStep() {
            // Hide current step
            document.getElementById(`step${currentStep}`).style.display = 'none';
            
            // Show previous step
            currentStep--;
            document.getElementById(`step${currentStep}`).style.display = 'block';
        }
        
        // Enhanced poem selection with language support
        function getContextualPoem(journalText, practicePrinciple = null) {
            const text = journalText.toLowerCase();
            const lang = currentLanguage;
            
            // Get appropriate keywords for current language
            const keywords = categoryKeywords[lang];
            
            // Determine keyword matching scores for each category
            let categoryScores = {};
            let keywordMatches = {};
            
            for (const [cat, catKeywords] of Object.entries(keywords)) {
                let score = 0;
                let matches = [];
                
                catKeywords.forEach(keyword => {
                    if (text.includes(keyword)) {
                        score += 2;
                        matches.push(keyword);
                        
                        // Bonus for exact phrase matches
                        if (text.includes(` ${keyword} `) || 
                            text.startsWith(`${keyword} `) || 
                            text.endsWith(` ${keyword}`)) {
                            score += 1;
                        }
                    }
                });
                
                categoryScores[cat] = score;
                keywordMatches[cat] = matches;
            }
            
            // Get top categories (sort by score)
            const sortedCategories = Object.entries(categoryScores)
                .sort((a, b) => b[1] - a[1])
                .filter(([cat, score]) => score > 0);
            
            // Get highest scoring category
            const highestCategory = sortedCategories.length > 0 ? sortedCategories[0][0] : 'rooting';
            
            // Determine which category to prioritize (latest practice or highest keyword)
            const priorityCategory = practicePrinciple || highestCategory;
            
            // Prepare list of all poems with scores
            let poemCandidates = [];
            
            // Get poems for current language
            const poems = poeticWisdom[lang];
            
            // Score all poems across all categories
            for (const [category, poemList] of Object.entries(poems)) {
                poemList.forEach((poemObj, index) => {
                    const poemId = poemObj.id;
                    const usageCount = myTree.poemUsage[poemId] || 0;
                    const hasBeenShownTwice = usageCount >= 2;
                    
                    // Skip poems shown twice (according to your requirement)
                    if (hasBeenShownTwice) {
                        return;
                    }
                    
                    let score = 0;
                    const isUnseen = usageCount === 0;
                    
                    // Priority 1: Latest practice principle + unseen (100 points)
                    if (category === priorityCategory && isUnseen) {
                        score = 100;
                    }
                    // Priority 2: Exact match + unseen (80 points)
                    else if (category === highestCategory && isUnseen) {
                        score = 80;
                    }
                    // Priority 3: Same category + unseen (70 points)
                    else if (category === highestCategory && isUnseen) {
                        score = 70;
                    }
                    // Priority 4: Different category + high keyword match + unseen (60 points)
                    else if (categoryScores[category] > 0 && isUnseen) {
                        score = 60;
                    }
                    // Priority 5: Exact match + seen once (50 points)
                    else if (category === highestCategory && usageCount === 1) {
                        score = 50;
                    }
                    // Fallback: Random (10 points)
                    else {
                        score = 10;
                    }
                    
                    // Bonus for poems that contain user's keywords in the poem text
                    const poemText = poemObj.poem.toLowerCase();
                    keywordMatches[category]?.forEach(keyword => {
                        if (poemText.includes(keyword)) {
                            score += 5;
                        }
                    });
                    
                    poemCandidates.push({
                        poem: poemObj,
                        score: score,
                        category: category,
                        poemId: poemId,
                        usageCount: usageCount,
                        isUnseen: isUnseen
                    });
                });
            }
            
            // Sort by score (highest first)
            poemCandidates.sort((a, b) => b.score - a.score);
            
            // If no candidates (all poems shown twice), fallback to random from highest category
            if (poemCandidates.length === 0) {
                const fallbackPoems = poems[highestCategory] || poems.rooting;
                const randomIndex = Math.floor(Math.random() * fallbackPoems.length);
                const fallbackPoem = fallbackPoems[randomIndex];
                return {
                    poem: fallbackPoem.poem,
                    sage: fallbackPoem.sage,
                    category: highestCategory,
                    poemId: fallbackPoem.id
                };
            }
            
            // Select top scoring poem
            const selectedCandidate = poemCandidates[0];
            
            // Update usage tracking
            const poemId = selectedCandidate.poemId;
            myTree.poemUsage[poemId] = (myTree.poemUsage[poemId] || 0) + 1;
            
            // Track by category
            if (!myTree.shownPoemsByCategory[selectedCandidate.category].includes(poemId)) {
                myTree.shownPoemsByCategory[selectedCandidate.category].push(poemId);
            }
            
            return {
                poem: selectedCandidate.poem.poem,
                sage: selectedCandidate.poem.sage,
                category: selectedCandidate.category,
                poemId: poemId,
                score: selectedCandidate.score
            };
        }
        
        function completePractice() {
            const t = TEXT[currentLanguage];
            
            if (!myTree.name) {
                alert(t.alertPlantFirst);
                showCard('plant');
                return;
            }
            
            if (!selectedPrinciple) {
                alert(t.alertSelectPrinciple);
                return;
            }
            
            const journalText = document.getElementById('practiceJournal').value.trim();
            const principles = principlesData[currentLanguage];
            const principle = principles.find(p => p.id === selectedPrinciple);
            
            if (!journalText) {
                alert(t.alertWriteJournal);
                return;
            }
            
            // Get contextual poem with practice principle
            const poem = getContextualPoem(journalText, principle.id);
            
            // Update last practice principle
            myTree.lastPracticePrinciple = principle.id;
            
            // Add practice
            myTree.practices.push({
                date: new Date().toLocaleString(),
                principle: principle.title,
                journal: journalText
            });
            
            // Grow tree
            myTree.rings++;
            myTree.poemsReceived++;
            
            // Update stage based on rings
            if (myTree.rings < 4) myTree.stage = 1;
            else if (myTree.rings < 8) myTree.stage = 2;
            else if (myTree.rings < 13) myTree.stage = 3;
            else if (myTree.rings < 18) myTree.stage = 4;
            else myTree.stage = 5;
            
            // Add to journals
            myTree.journals.push({
                date: new Date().toLocaleString(),
                text: journalText,
                poem: poem.poem,
                sage: poem.sage,
                principle: principle.title,
                type: 'practice',
            });
            
            // Save
            saveTree();
            updateDisplay();
            
            // Show poem
            document.getElementById('practiceContent').style.display = 'none';
            document.getElementById('practiceResult').style.display = 'block';
            
            document.getElementById('poemText').innerHTML = poem.poem.replace(/\n/g, '<br>');
            document.getElementById('sageQuote').textContent = poem.sage;
            
            document.getElementById('resultMessage').innerHTML = 
                t.practiceComplete
                    .replace('{principle}', principle.title)
                    .replace('{stage}', myTree.stage);
            
            // Auto-redirect to journal after 3 seconds
            setTimeout(() => {
                showCard('journal');
                loadJournalEntries();
            }, 3000);
        }
        
        function saveJournalEntry() {
            const t = TEXT[currentLanguage];
            const text = document.getElementById('newJournalEntry').value.trim();
            
            if (!text) {
                alert(t.alertWriteSomething);
                return;
            }
            
            // Get contextual poem - use last practice principle if available
            const practicePrinciple = myTree.lastPracticePrinciple || null;
            const poem = getContextualPoem(text, practicePrinciple);
            myTree.poemsReceived++;
            
            myTree.journals.push({
                date: new Date().toLocaleString(),
                text: text,
                poem: poem.poem,
                sage: poem.sage,
                principle: "Journal Entry",
                type: 'journal',
            });
            
            saveTree();
            loadJournalEntries();
            
            // Clear field
            document.getElementById('newJournalEntry').value = "";
            
            // Scroll to show new entry
            const journalEntries = document.getElementById('journalEntries');
            if (journalEntries.firstChild) {
                journalEntries.firstChild.scrollIntoView({ behavior: 'smooth' });
            }
        }
        
        function loadJournalEntries() {
            const container = document.getElementById('journalEntries');
            const t = TEXT[currentLanguage];
            container.innerHTML = "";
            
            if (myTree.journals.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 30px; color: #666; font-style: italic;">
                        ${t.noEntries}
                    </div>
                `;
                return;
            }
            
            // Show most recent first
            myTree.journals.slice().reverse().forEach((entry, index) => {
                const isPractice = entry.type === 'practice';
                
                container.innerHTML += `
                    <div class="journal-entry">
                        <div class="entry-date">
                            <span>${entry.date}</span>
                            <span>${isPractice ? 'ğŸ“¿ ' + entry.principle : 'ğŸ“– ' + (currentLanguage === 'en' ? 'Journal' : 'áƒ“áƒ¦áƒ˜áƒ£áƒ áƒ˜')}</span>
                        </div>
                        <p>${entry.text}</p>
                    </div>
                    <div class="poem-response">
                        <p>${entry.poem.replace(/\n/g, '<br>')}</p>
                        <div class="sage-quote">${entry.sage}</div>
                    </div>
                `;
            });
        }
        
        function clearJournal() {
            document.getElementById('newJournalEntry').value = "";
        }
        
        function updateForestCard() {
            const t = TEXT[currentLanguage];
            
            if (!myTree.name) {
                document.getElementById('treeNameDisplay').textContent = t.noTree;
                document.getElementById('treeAscii').textContent = t.plantToBegin;
                document.getElementById('progressText').textContent = "0/5";
                return;
            }
            
            document.getElementById('treeNameDisplay').textContent = myTree.name;
            
            // Show appropriate tree stage
            const stageIndex = Math.min(myTree.stage - 1, treeStages.length - 1);
            document.getElementById('treeAscii').textContent = treeStages[stageIndex];
            
            // Update progress ring
            const progressPercent = (myTree.stage / 5) * 100;
            document.querySelector('.progress-ring').style.background = 
                `conic-gradient(#4a7c3f 0% ${progressPercent}%, #e8f5e8 ${progressPercent}% 100%)`;
            document.getElementById('progressText').textContent = `${myTree.stage}/5`;
            
            // Update stats
            document.getElementById('statRings').textContent = myTree.rings;
            document.getElementById('statStage').textContent = myTree.stage;
            document.getElementById('statJournals').textContent = myTree.journals.length;
            document.getElementById('statPoems').textContent = myTree.poemsReceived;
        }
        
        function updateDisplay() {
            updateForestCard();
        }
        
        function saveTree() {
            localStorage.setItem('forestTree', JSON.stringify(myTree));
        }
        
        function checkAppVersion() {
            const savedVersion = localStorage.getItem(VERSION_KEY);
            
            if (savedVersion !== APP_VERSION) {
                console.log(`ğŸŒ³ Updating from v${savedVersion || '1.0'} to v${APP_VERSION}`);
                
                // Ensure new properties exist
                myTree.lastPracticePrinciple = myTree.lastPracticePrinciple || null;
                myTree.poemUsage = myTree.poemUsage || {};
                myTree.shownPoemsByCategory = myTree.shownPoemsByCategory || {
                    rooting: [], bark: [], rings: [], release: [], reaching: [],
                    network: [], bending: [], shape: [], seasons: [], wholeness: [],
                    patience: [], presence: []
                };
                
                // Save new version
                localStorage.setItem(VERSION_KEY, APP_VERSION);
                saveTree();
                
                // Show update message if not first install
                if (savedVersion) {
                    setTimeout(() => {
                        const t = TEXT[currentLanguage];
                        const updateMsg = `ğŸŒ³ ${currentLanguage === 'en' ? 'Forest of Support Updated!' : 'áƒ›áƒ®áƒáƒ áƒ“áƒáƒ­áƒ”áƒ áƒ˜áƒ¡ áƒ¢áƒ§áƒ” áƒ’áƒáƒœáƒáƒ®áƒšáƒ“áƒ!'}\n\n${currentLanguage === 'en' ? 'Version' : 'áƒ•áƒ”áƒ áƒ¡áƒ˜áƒ'} ${APP_VERSION}:\nâ€¢ ${currentLanguage === 'en' ? 'Enhanced poem selection' : 'áƒ’áƒáƒ£áƒ›áƒ¯áƒáƒ‘áƒ”áƒ¡áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒáƒáƒ”áƒ›áƒ˜áƒ¡ áƒ¨áƒ”áƒ áƒ©áƒ”áƒ•áƒ'}\nâ€¢ ${currentLanguage === 'en' ? 'No repeated poems' : 'áƒáƒáƒ”áƒ›áƒ”áƒ‘áƒ˜ áƒáƒ  áƒ’áƒáƒœáƒ›áƒ”áƒáƒ áƒ“áƒ”áƒ‘áƒ'}\nâ€¢ ${currentLanguage === 'en' ? 'Better contextual matching' : 'áƒ£áƒ™áƒ”áƒ—áƒ”áƒ¡áƒ˜ áƒ™áƒáƒœáƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ£áƒáƒšáƒ£áƒ áƒ˜ áƒ¨áƒ”áƒ¡áƒáƒ‘áƒáƒ›áƒ˜áƒ¡áƒáƒ‘áƒ'}\nâ€¢ ${currentLanguage === 'en' ? 'Tracks your progress' : 'áƒáƒ™áƒáƒœáƒ¢áƒ áƒáƒšáƒ”áƒ‘áƒ¡ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ¡ áƒáƒ áƒáƒ’áƒ áƒ”áƒ¡áƒ¡'}`;
                        if (confirm(updateMsg + `\n\n${currentLanguage === 'en' ? 'Show detailed update notes?' : 'áƒ’áƒáƒ›áƒáƒ©áƒœáƒ“áƒ”áƒ¡ áƒ“áƒ”áƒ¢áƒáƒšáƒ£áƒ áƒ˜ áƒ’áƒáƒœáƒáƒ®áƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒ˜áƒœáƒ¤áƒáƒ áƒ›áƒáƒªáƒ˜áƒ?'}`)) {
                            showCard('welcome');
                            document.getElementById('welcome').innerHTML += `
                                <div class="step" style="background: #f0f7f0; margin-top: 20px;">
                                    <h3>${t.updateTitle.replace('{version}', APP_VERSION)}</h3>
                                    <p>${t.updateNewPoem}</p>
                                    <ul style="padding-left: 20px; margin: 10px 0;">
                                        ${t.updateList}
                                    </ul>
                                    <p>${t.updatePreserved}</p>
                                </div>
                            `;
                        }
                    }, 2000);
                }
            }
        }
    </script>
    
    <script>
        // PWA Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                // Use absolute path for GitHub Pages
                const swPath = '/Digital-forest-of-support/sw.js?v=' + APP_VERSION;
                
                navigator.serviceWorker.register(swPath)
                    .then(function(registration) {
                        console.log('ğŸŒ³ ServiceWorker registered: ', registration.scope);
                        
                        // Check for updates
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            console.log('ğŸŒ³ New service worker found:', newWorker.state);
                            
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // New update available
                                    console.log('ğŸŒ³ New content available, please refresh.');
                                    
                                    // Show update notification
                                    const updateMsg = currentLanguage === 'en' 
                                        ? 'ğŸŒ³ New update available for Forest of Support!\n\nRefresh to get the latest features?'
                                        : 'ğŸŒ³ áƒ›áƒ®áƒáƒ áƒ“áƒáƒ­áƒ”áƒ áƒ˜áƒ¡ áƒ¢áƒ§áƒ”áƒ¡ áƒáƒ®áƒáƒšáƒ˜ áƒ’áƒáƒœáƒáƒ®áƒšáƒ”áƒ‘áƒ áƒ®áƒ”áƒšáƒ›áƒ˜áƒ¡áƒáƒ¬áƒ•áƒ“áƒáƒ›áƒ˜áƒ!\n\náƒ’áƒáƒœáƒáƒáƒ®áƒšáƒáƒ— áƒ£áƒáƒ®áƒšáƒ”áƒ¡áƒ˜ áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ”áƒ‘áƒ˜áƒ¡ áƒ›áƒ˜áƒ¡áƒáƒ¦áƒ”áƒ‘áƒáƒ“?';
                                    
                                    if (confirm(updateMsg)) {
                                        window.location.reload();
                                    }
                                }
                            });
                        });
                    })
                    .catch(function(err) {
                        console.log('ğŸŒ³ ServiceWorker registration failed: ', err);
                    });
            });
        }
        
        // Check for updates periodically
        setInterval(() => {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistration().then(reg => {
                    if (reg) {
                        reg.update();
                    }
                });
            }
        }, 60 * 60 * 1000); // Check every hour
    </script>

    <script>
        // FORCE SERVICE WORKER UPDATE
        if ('serviceWorker' in navigator && window.location.search.includes('forceupdate')) {
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
                registrations.forEach(function(registration) {
                    registration.unregister();
                });
            }).then(function() {
                localStorage.setItem('lastForceUpdate', new Date().toISOString());
                window.location.href = window.location.href.split('?')[0] + '?v=' + Date.now();
            });
        }
    </script>
</body>
</html>
